.. SPDX-License-Identifier: MIT

====================
学习vi和vim编辑器
====================

简单的文本编辑
---------------

- 光标移动命令
  
  +---------------------+----------------+
  |  移动               |     命令       |
  +=====================+================+
  | 左、下、上、右      | h、j、k、l     |
  +---------------------+----------------+
  | 到下一行的第一个字符| \+             | 
  +---------------------+----------------+
  | 到上一行的第一个字符| \-             |
  +---------------------+----------------+
  | 往前一个单词        | w或W           | 
  +---------------------+----------------+
  | 往后一个单词        | b或B           | 
  +---------------------+----------------+
  | 到一行的结尾        | $              | 
  +---------------------+----------------+
  | 到一行的开头        | 0              | 
  +---------------------+----------------+
  | 移动到具体的某一行  | 42G            | 
  +---------------------+----------------+
  | 移动到文本开头      | gg             | 
  +---------------------+----------------+
  | 移动到文本结尾      | G              | 
  +---------------------+----------------+

- 文本创建与操纵命令

  +-------------------------------------------+----------------+
  |  编辑动作                                 |     命令       |
  +===========================================+================+
  |  在光标所在位置插入文本                   | i              |
  +-------------------------------------------+----------------+
  | 在一行的开头插入文本                      | I              | 
  +-------------------------------------------+----------------+
  | 在光标所在位置附加文本                    | a              |
  +-------------------------------------------+----------------+
  | 在一行的最后附加文本                      | A              | 
  +-------------------------------------------+----------------+
  | 在光标下一行打开新行                      | o              | 
  +-------------------------------------------+----------------+
  | 在光标上一行打开新行                      | O              | 
  +-------------------------------------------+----------------+
  | 删除一行并替换文本                        | S              | 
  +-------------------------------------------+----------------+
  | 替换光标所在位置若干个字符后再替换文本    | 4s             | 
  +-------------------------------------------+----------------+
  | 用新文本覆盖现有的文本                    | R              | 
  +-------------------------------------------+----------------+
  | 合并当前这一行与下一行                    | J              | 
  +-------------------------------------------+----------------+
  | 合并连续三行                              | 3J             | 
  +-------------------------------------------+----------------+
  | 切换当前字符的大小写                      | ~              | 
  +-------------------------------------------+----------------+
  | 重复上一个动作                            | .              | 
  +-------------------------------------------+----------------+
  | 撤销上一个动作                            | u              | 
  +-------------------------------------------+----------------+
  | 将一整行恢复到原来的状态                  | U              | 
  +-------------------------------------------+----------------+

- 其他操作

  +---------------------------------------------------+----------------+
  |  操作                                             |     命令       |
  +===================================================+================+
  |  往缓冲区中放置文本                               | P或p           |
  +---------------------------------------------------+----------------+
  | 打开vi,如果指定了文件则打开文件                   | vi file        | 
  +---------------------------------------------------+----------------+
  | 保存编辑结果，并离开文件                          | ZZ或:wq        |
  +---------------------------------------------------+----------------+
  | 写入文件同时离开编辑器,只有文件被修改过时才会写入 | :x             |
  +---------------------------------------------------+----------------+
  | 不保存编辑结果，并离开文件                        | :q!            |
  +---------------------------------------------------+----------------+
  | 消除所有编辑结果，回到原来的文件                  | :e!            |
  +---------------------------------------------------+----------------+
  | 保存的新文件名与原来文件同名时，怎么覆盖现有文件  | :w!  file      |             
  +---------------------------------------------------+----------------+
  | 作业控制系统中，将vi任务放回后台job,并且暂停vi    | ctrl+z         |             
  +---------------------------------------------------+----------------+
  | 从控制台上恢复之前的作业vi                        | fg             |             
  +---------------------------------------------------+----------------+
  | vi中:term打开终端后，如何离开该打开的终端         | ctrl+d或exit   |             
  +---------------------------------------------------+----------------+
  | 设置与右边界的距离，vim可以自动插入换行符         | :set wm=10     |             
  +---------------------------------------------------+----------------+
  | 设置行编号                                        | :set nu        |             
  +---------------------------------------------------+----------------+
  | 插入50个星星                                      | 50i*<Esc>      |             
  +---------------------------------------------------+----------------+
  | \|\|换成&&,先将光标放在第一个\|字符上             | 2r&            |             
  +---------------------------------------------------+----------------+
 

- 编辑命令

  +--------------------------+----------------+----------------+----------------+
  |  文本对象                |     更改       |     删除       |     复制       |
  +==========================+================+================+================+
  |  一个单词                | cw             |   dw           |   yw           |
  +--------------------------+----------------+----------------+----------------+
  | 两个单词，不包括标点符号 | 2cW或c2W       | 2dW或d2W       | 2yW或者y2W     |
  +--------------------------+----------------+----------------+----------------+
  | 后退三个单词             | 3cb或c3b       | 3db或d3b       | 3yb或者y3b     |
  +--------------------------+----------------+----------------+----------------+
  | 一整行                   | cc             | dd             | yy             |
  +--------------------------+----------------+----------------+----------------+
  | 到一行的结尾             | c$或C          | d$或D          | y$             |
  +--------------------------+----------------+----------------+----------------+
  | 到一行的开头             | c0             | d0             | y0             |
  +--------------------------+----------------+----------------+----------------+
  | 单个字符                 | r              | x或X           | yl或yh         |
  +--------------------------+----------------+----------------+----------------+
  | 五个字符                 | 5s             | 5x             | 5yl            |
  +--------------------------+----------------+----------------+----------------+

快速移动位置
---------------

- 根据屏幕来移动

  +----------------------------------------------------+----------------+
  |  移动命令                                          |  命令          |
  +====================================================+================+
  | 往前(下)滚动一整个屏幕                             | ctrl+f         |
  +----------------------------------------------------+----------------+
  | 往后(上)滚动一整个屏幕                             | ctrl+b         |
  +----------------------------------------------------+----------------+
  | 往前(下)滚动半个屏幕                               | ctrl+d         |
  +----------------------------------------------------+----------------+
  | 往后(上)滚动半个屏幕                               | ctrl+u         |
  +----------------------------------------------------+----------------+
  | 往前(下)滚动一行                                   | ctrl+e         |
  +----------------------------------------------------+----------------+
  | 往后(上)滚动一行                                   | ctrl+y         |
  +----------------------------------------------------+----------------+
  | 保持光标在原来行,将光标移到屏幕顶端并滚动屏幕      | z<Enter>       |
  +----------------------------------------------------+----------------+
  | 保持光标在原来行,将光标移到屏幕中心并滚动屏幕      | z\.            |
  +----------------------------------------------------+----------------+
  | 保持光标在原来行,将光标移到屏幕底端并滚动屏幕      | z-             |
  +----------------------------------------------------+----------------+
  | 重画屏幕                                           | ctrl+l         |
  +----------------------------------------------------+----------------+
  | 将第200行移到屏幕顶端                              | 200z<Enter>    |
  +----------------------------------------------------+----------------+
  | 移到屏幕顶端的行,该页的第一个字符                  | H              |
  +----------------------------------------------------+----------------+
  | 将光标移动到第一行下面的一行                       | 2H             |
  +----------------------------------------------------+----------------+
  | 移到屏幕中央的行                                   | M              |
  +----------------------------------------------------+----------------+
  | 移到屏幕底端的行                                   | L              |
  +----------------------------------------------------+----------------+
  | 移到屏幕顶端往下的第n行                            | nH             |
  +----------------------------------------------------+----------------+
  | 移到屏幕底端往上的第n行                            | nL             |
  +----------------------------------------------------+----------------+
  | 移到下一行的第一个字符                             | <Enter>        |
  +----------------------------------------------------+----------------+
  | 移到下一行的第一个字符                             | \+             |
  +----------------------------------------------------+----------------+
  | 移到上一行的第一个字符                             | \-             |
  +----------------------------------------------------+----------------+
  | 移到当前行的第一个非空格处                         | ^              |
  +----------------------------------------------------+----------------+
  | 移到当前行的第n列                                  | n|             |
  +----------------------------------------------------+----------------+



- 根据文本块来移动(单词，句子，段落，小节)

  +-------------------------------------------+----------------+
  |  移动命令                                 |     命令       |
  +===========================================+================+
  |  移到单词的结尾                           | e              |
  +-------------------------------------------+----------------+
  |  移到单词的结尾（忽略标点符号）           | E              |
  +-------------------------------------------+----------------+
  |  移到当前句子的开头                       | (              |
  +-------------------------------------------+----------------+
  |  往前移动三个句子                         | 3\)            |
  +-------------------------------------------+----------------+
  |  删除文本直到当前句子的结尾               | d\)            |
  +-------------------------------------------+----------------+
  |  向前复制两段文本                         | 2y}            |
  +-------------------------------------------+----------------+
  |  移到下一个句子的开头                     | )              |
  +-------------------------------------------+----------------+
  |  移到当前这一段的开头                     | {              |
  +-------------------------------------------+----------------+
  |  移到下一段的开头                         | }              |
  +-------------------------------------------+----------------+
  |  移到当前这一节的开头                     | [[             |
  +-------------------------------------------+----------------+
  |  移到下一节的开头                         | ]]             |
  +-------------------------------------------+----------------+


- 根据搜索模式的结果来移动

  +-----------------------------------------------+------------------+
  |  移动命令                                     |     命令         |
  +===============================================+==================+
  |  往前搜索模式                                 | /pattern         |
  +-----------------------------------------------+------------------+
  |  往后搜索模式                                 | ?pattern         |
  +-----------------------------------------------+------------------+
  |  搜索光标位置之前或后的单词，不绕回开头       | :set nowrapscan  |
  +-----------------------------------------------+------------------+
  |  往同一个方向重复搜索                         | n                |
  +-----------------------------------------------+------------------+
  |  往相反方向重复搜索                           | N                |
  +-----------------------------------------------+------------------+
  |  往前重复搜索                                 | /<Enter>         |
  +-----------------------------------------------+------------------+
  |  往后重复搜索                                 | ?<Enter>         |
  +-----------------------------------------------+------------------+
  |  搜索当前行中下一个出现x的地方                | fx               |
  +-----------------------------------------------+------------------+
  |  删除到下一个x字符为止的所有文本，包括x在内   | dfx代替dw        |
  +-----------------------------------------------+------------------+
  |  搜索当前行中上一个出现x的地方                | Fx               |
  +-----------------------------------------------+------------------+
  |  搜索当前行中下一个出现x的地方的前一个字符    | tx               |
  +-----------------------------------------------+------------------+
  |  搜索当前行中上一个出现x的地方的后一个字符    | Tx               |
  +-----------------------------------------------+------------------+
  |  重复上一个搜索命令,方向相同                  | ;                |
  +-----------------------------------------------+------------------+
  |  重复上一个搜索命令，方向相反                 | ,                |
  +-----------------------------------------------+------------------+

- 根据行号来移动

  +-----------------------------------------------+----------------+
  |  移动命令                                     |     命令       |
  +===============================================+================+
  |  转至第n行                                    | nG             |
  +-----------------------------------------------+----------------+
  |  转至文件结尾                                 | G              |
  +-----------------------------------------------+----------------+
  |  回到上一个记号或上下文                       | ``             |
  +-----------------------------------------------+----------------+
  |  回到包含上一个记号的行的开头处               | ''             |
  +-----------------------------------------------+----------------+
  |  显示当前的行号(不是移动命令)                 | ctrl+g         |
  +-----------------------------------------------+----------------+


编辑命令扩展
---------------

- 更多编辑命令

  +-----------+-----------+-----------+------------------------+
  | 更改      | 删除      | 复制      | 从光标位置到......     |
  +===========+===========+===========+========================+
  | cH        | dH        | yH        | 屏幕顶端               |
  +-----------+-----------+-----------+------------------------+
  | cL        | dL        | yL        | 屏幕底端               |
  +-----------+-----------+-----------+------------------------+
  | c+        | d+        | y+        | 下一行                 |
  +-----------+-----------+-----------+------------------------+
  | c5|       | d5|       | y5|       | 本行的第5列(第5个字符) |
  +-----------+-----------+-----------+------------------------+
  | 2c)       | 2d)       | 2y)       | 往下第二个句子         |
  +-----------+-----------+-----------+------------------------+
  | c{        | d{        | y{        | 上一段                 |
  +-----------+-----------+-----------+------------------------+
  | c/pattern | d/pattern | y/pattern | pattern(模式)          |
  +-----------+-----------+-----------+------------------------+
  | cn        | dn        | yn        | 下一个模式             |
  +-----------+-----------+-----------+------------------------+
  | cG        | dG        | yG        | 文件结尾               |
  +-----------+-----------+-----------+------------------------+
  | c13G      | d13G      | y13G      | 第13行                 |
  +-----------+-----------+-----------+------------------------+

- 打开vi的选项

  +-------------------------------------+----------------------------+
  |     说明                            |    命令                    |
  +=====================================+============================+
  | 在第n行打开file                     | vi +n file                 |
  +-------------------------------------+----------------------------+
  | 在最后一行打开file                  | vi + file                  |
  +-------------------------------------+----------------------------+
  | 在第一个出现pattern的地方打开file   | vi +/pattern file          |
  +-------------------------------------+----------------------------+
  | 在第一个出现pattern的地方打开file   | vi +/pattern file          |
  +-------------------------------------+----------------------------+
  | 模式中有空格需要单引号或双引号括起  | vi +/"you make" fie        |
  +-------------------------------------+----------------------------+
  | 模式中有空格也可以用凡斜杆转义空格  | vi +/you\\ make file       |
  +-------------------------------------+----------------------------+
  | 只读模式显示文件                    | vi -R file或view file      |
  +-------------------------------------+----------------------------+
  | 只读模式下如何保存，覆盖只读模式    | :w!或:wq!                  |
  +-------------------------------------+----------------------------+
  | 在打开文件后执行命令                | -c command file            |
  +-------------------------------------+----------------------------+
  | 在死机后恢复文件                    | -r                         |
  +-------------------------------------+----------------------------+


- 缓冲区相关操作

  +-------------------------------------------------------------+------------------+
  | 缓冲区用途以及意义                                          | 缓冲区名称及命令 |
  +=============================================================+==================+
  | 最后9次删除操作的内容,从最后一次到最先一次                  | 1~9              |
  +-------------------------------------------------------------+------------------+
  | 可以使用的命名缓冲区,大写字母表示附加到缓冲区现有的内容后面 | a~z              |
  +-------------------------------------------------------------+------------------+
  | 用缓冲区b执行命令                                           | "b command       |
  +-------------------------------------------------------------+------------------+
  | 将当前位置标记为x                                           | mx               |
  +-------------------------------------------------------------+------------------+
  | 将光标移到标记x所在行的第一个字符                           | 'x               |
  +-------------------------------------------------------------+------------------+
  | 将光标移到x标记的字符                                       | `x               |
  +-------------------------------------------------------------+------------------+
  | 回到上一个标记或上下文的确切位置                            | ``               |
  +-------------------------------------------------------------+------------------+
  | 回到上一个标记或上下文所在行的开头                          | ''               |
  +-------------------------------------------------------------+------------------+

ex编辑器
---------------

+--------------+-----------------+---------------------+
| Full name    |  Abbreviation   |  Meaning            |
+==============+=================+=====================+
| delete       | d               | 删除行              |
+--------------+-----------------+---------------------+
| move         | m               | 移动行              |
+--------------+-----------------+---------------------+
| copy         | co              | 复制行              |
+--------------+-----------------+---------------------+
| copy         | t               | 复制行(与co同义)    |
+--------------+-----------------+---------------------+



- 使用行号在文件中移动

  +--------------------------------------------------------------------------------+----------------------+
  |   说明                                                                         |  命令                |
  +================================================================================+======================+
  | 利用ex打开文件                                                                 | ex practice          |
  +--------------------------------------------------------------------------------+----------------------+
  | 显示第一行的内容                                                               | :1p                  |
  +--------------------------------------------------------------------------------+----------------------+
  | 打印1到3行内容                                                                 | :1,3p                |
  +--------------------------------------------------------------------------------+----------------------+
  | 替换当前行的单词screen为line                                                   | :s/screen/line/      |
  +--------------------------------------------------------------------------------+----------------------+
  | 移动到文件的第6行                                                              | :6                   |
  +--------------------------------------------------------------------------------+----------------------+
  | vi中如何进入ex模式                                                             | Q                    |
  +--------------------------------------------------------------------------------+----------------------+
  | vi中的ex模式怎么退出到vi模式                                                   | :vi,重新输入vi命令   |
  +--------------------------------------------------------------------------------+----------------------+
  | 删除第3行到第18行                                                              | :3,18d               |
  +--------------------------------------------------------------------------------+----------------------+
  | 将160到224行移到23行之后                                                       | :160,224m23          |
  +--------------------------------------------------------------------------------+----------------------+
  | 将23到29行复制到100行之后                                                      | :23,29co100          |
  +--------------------------------------------------------------------------------+----------------------+
  | 列出文件的总行数                                                               | :=                   |
  +--------------------------------------------------------------------------------+----------------------+
  | 列出当前所在行的行号                                                           | :.=                  |
  +--------------------------------------------------------------------------------+----------------------+
  | 列出pattern第一次出现时的行号                                                  | :/pattern/=          |
  +--------------------------------------------------------------------------------+----------------------+
  | 删除当前行到文件结尾的文本                                                     | :.,$d                |
  +--------------------------------------------------------------------------------+----------------------+
  | 将20行到当前行的文本移到文件结尾                                               | :20,.m$              |
  +--------------------------------------------------------------------------------+----------------------+
  | 删除文件中所有的行                                                             | :%d                  |
  +--------------------------------------------------------------------------------+----------------------+
  | 将所有的行复制到文件结尾                                                       | :%t$                 |
  +--------------------------------------------------------------------------------+----------------------+
  | 删除当前行到20行之后的行之间的文本                                             | :.,.+20d             |
  +--------------------------------------------------------------------------------+----------------------+
  | 将226行到结尾间的行移到当前行的两行前                                          | :226,$m.-2           |
  +--------------------------------------------------------------------------------+----------------------+
  | 显示当前行及下面20行之间行号,共21行                                            | :.,+20#              |
  +--------------------------------------------------------------------------------+----------------------+
  | 复制3行(光标上面一行到光标下面一行)放到文件开头                                | :-,+t0               |
  +--------------------------------------------------------------------------------+----------------------+


- 使用ex命令对一块文本做复制、移动与删除

  +------------------------------------------------------------------+-----------------------------+
  | 说明                                                             | 命令                        |
  +==================================================================+=============================+
  | 删除下一个包含pattern的行                                        | :/pattern/d                 |
  +------------------------------------------------------------------+-----------------------------+
  | 删除下一个包含pattern的行的下一行(也可以用+1代替+)               | :/pattern/+d                |
  +------------------------------------------------------------------+-----------------------------+
  | 从第一个包含pattern1的行删除到第一个包含pattern2的行             | :/pattern1/,/pattern2/d     |
  +------------------------------------------------------------------+-----------------------------+
  | 将当前行(.)到第一个包含pattern的行之间文本移到23行后             | :.,/pattern/m23             |
  +------------------------------------------------------------------+-----------------------------+
  | 打印从100行到当前行下面5行之间的消息                             | :100,+5 p                   |
  +------------------------------------------------------------------+-----------------------------+
  | 打印100行到106行之间的内容,会把当前行认为是100行                 | :100;+5 p                   |
  +------------------------------------------------------------------+-----------------------------+
  | 显示指定模式的下一行及后续10行                                   | :/pattern/;+10 p            |
  +------------------------------------------------------------------+-----------------------------+
  | 寻找(移到)文件中最后一次出现pattern的地方                        | :g/pattern                  |
  +------------------------------------------------------------------+-----------------------------+
  | 寻找并显示文件中所有包含pattern的行                              | :g/pattern/p                |
  +------------------------------------------------------------------+-----------------------------+
  | 寻找并显示文件中所有不包含pattern的行，显示所有找到的行号        | :g!/pattern/nu              |
  +------------------------------------------------------------------+-----------------------------+
  | 寻找并显示60行和124行之间包含pattern的行                         | :60,124g/pattern/p          |
  +------------------------------------------------------------------+-----------------------------+
  | 寻找并显示60行和124行之间包含pattern的行                         | :60,124g/pattern/p          |
  +------------------------------------------------------------------+-----------------------------+
  | 删除1到3行(假设位于文件开头),接着在当前行做替换(原来第4行)       | :1,3d \| s/thier/their/     |
  +------------------------------------------------------------------+-----------------------------+
  | 第1行到5行移到10行之后，显示所有包含pattern的行(包括行号)        | :1,5 m 10 | g/pattern/nu    |
  +------------------------------------------------------------------+-----------------------------+
  
   
- 保存文件与文件的一部分

  +--------------------------------------------+-------------------+
  |  说明                                      |  命令             |
  +============================================+===================+
  | 将230行到文件结尾保存成newfile文件         | :230,$w newfile   |
  +--------------------------------------------+-------------------+
  | 将光标所在行到600行保存为newfile文件       | :.,600w newfile   |
  +--------------------------------------------+-------------------+
  | 将1到10行内容放到newfile中                 | :1,10w newfile    |
  +--------------------------------------------+-------------------+
  | 将340行到缓冲区结尾的内容附加到newfile中   | :340,$w newfile   |
  +--------------------------------------------+-------------------+



- 编辑多个文件(读入内容或命令,在文件间切换)

  +---------------------------------------------------------+-------------------------------+
  |  说明                                                   | 命令                          |
  +=========================================================+===============================+
  | 把filename的内容插入到光标所在位置的下一行              | :read filename或者r filename  |
  +---------------------------------------------------------+-------------------------------+
  | 从185行之后插入一个文件                                 | :185r filename                |
  +---------------------------------------------------------+-------------------------------+
  | 将读入的文件放在当前文件的开头                          | :0r /home/tim/data            |
  +---------------------------------------------------------+-------------------------------+
  | 将读入的文件放在第一个出现pattern的行之后               | :/pattern/r /home/tim/data    |
  +---------------------------------------------------------+-------------------------------+
  | 打开多个文件，调用下一个文件                            | vi file1 file2  :w  :n    :x  |
  +---------------------------------------------------------+-------------------------------+
  | 使用参数列表在多个文件之间跳转，正向跳转                | :args     :n                  |
  +---------------------------------------------------------+-------------------------------+
  | 使用参数列表在多个文件之间跳转，反向跳转                | :args     :prev               |
  +---------------------------------------------------------+-------------------------------+
  | 先打开一个文件,用:e file打开新文件,如何切换至原来文件   | :e #                          |
  +---------------------------------------------------------+-------------------------------+
  | 切换文件，功能和:e #一样                                | ctrl+^                        |
  +---------------------------------------------------------+-------------------------------+

- 如何在多个文件之间编辑?
  - 利用缓冲区在多个文件之间复制粘贴
    - 复制4行到f缓存区 "f4yy
    - 打开新的文件  :e letter
    - 光标放在需要粘贴的地方,从f缓存区粘贴文本  "fp
  - 利用ex命令进行操作:ya(拖动)与:pu(放置)
    - 将160行到224行复制到缓冲区a中   :160,224ya a
    - 打开新文件  :e letter
    - 光标放在需要粘贴的地方，将缓存区a的内容放到所在行的下一行   :pu a
