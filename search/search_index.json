{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Thoughts on sports, travel, computing, and other interesting things \uf0c1 This is the top level of the bruce's notebook tree. Bruce documentation, like the notebook itself, is very much a work in progress; that is thoughts on sports, travel, computing, and other interesting things; have fun with a pleasure journey. About Me \uf0c1 This is bruce, come from a city called chizhou in Anhui province. The city is very famous for a buddhist mountain called jiuhua , which has large number of buddhist temples and attracts a lot of tourists every year. In July 2012, I graduated from Anhui university majoring in network engineering, and then started to work. Over these years, I Joined some companies, such as Longshine , ZTE . I have participated in and developed a lot of projects, and most of them were related to back-end. I have also worked with some programming languages, java, python, golang etc. Now I am in HP Shanghai as a senior back-end engineer, and helped to develop a PaaS platform called Horizon. In February 2020, my daughter was born, she is a gift for me. In my spare time, I like to watch movies, and play games. Sometimes I enjoy cooking and having delicious food with my family. Contact me \uf0c1 GitHub Email","title":"Home"},{"location":"#thoughts-on-sports-travel-computing-and-other-interesting-things","text":"This is the top level of the bruce's notebook tree. Bruce documentation, like the notebook itself, is very much a work in progress; that is thoughts on sports, travel, computing, and other interesting things; have fun with a pleasure journey.","title":"Thoughts on sports, travel, computing, and other interesting things"},{"location":"#about-me","text":"This is bruce, come from a city called chizhou in Anhui province. The city is very famous for a buddhist mountain called jiuhua , which has large number of buddhist temples and attracts a lot of tourists every year. In July 2012, I graduated from Anhui university majoring in network engineering, and then started to work. Over these years, I Joined some companies, such as Longshine , ZTE . I have participated in and developed a lot of projects, and most of them were related to back-end. I have also worked with some programming languages, java, python, golang etc. Now I am in HP Shanghai as a senior back-end engineer, and helped to develop a PaaS platform called Horizon. In February 2020, my daughter was born, she is a gift for me. In my spare time, I like to watch movies, and play games. Sometimes I enjoy cooking and having delicious food with my family.","title":"About Me"},{"location":"#contact-me","text":"GitHub Email","title":"Contact me"},{"location":"csapp/","text":"\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf \uf0c1 \u8ba1\u7b97\u673a\u7cfb\u7edf\u6f2b\u6e38 \uf0c1 \u6709\u5982\u4e0b\u6e90\u4ee3\u7801 helloworld.c #include<stdio.h> int main(){ printf(\"hello, world!\"); return 0; } \u4fe1\u606f\u5c31\u662f\u4f4d+\u4e0a\u4e0b\u6587 \uf0c1 \u6e90\u7a0b\u5e8f\u662f0\u548c1\u7ec4\u6210\u7684\u4f4d(\u53c8\u79f0\u4e4b\u4e3a\u6bd4\u7279bit)\u5e8f\u5217\uff0c8\u4e2a\u4f4d\u88ab\u7ec4\u7ec7\u6210\u4e00\u7ec4\uff0c\u79f0\u4e4b\u4e3a\u5b57\u8282Byte\u3002 1Byte=8bit, 1KB=1024Byte, 1M=1024KB, 1G=1024M, 1G=1024*1024*1024Byte=10^9Byte \u6bcf\u4e2a\u5b57\u8282\u8868\u793a\u7a0b\u5e8f\u4e2d\u7684\u67d0\u4e9b\u6587\u672c\u5b57\u7b26\u3002 \u5927\u90e8\u5206\u7684\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u90fd\u4f7f\u7528ASCII\u6807\u51c6\u6765\u8868\u793a\u6587\u672c\u5b57\u7b26\u3002 \u603b\u7ed3: helloworld.c \u7a0b\u5e8f\u662f\u4ee5\u5b57\u8282\u5e8f\u5217\u7684\u65b9\u5f0f\u5b58\u50a8\u5728\u6587\u4ef6\u4e2d\u7684\uff0c\u8fd9\u79cd\u8868\u793a\u65b9\u6cd5\u8bf4\u660e\u4e86\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u4fe1\u606f(\u5305\u62ec\u78c1\u76d8\u6587\u4ef6\u3001\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f\u3001\u5185\u5b58\u4e2d\u5b58\u653e\u7684\u7528\u6237\u6570\u636e\u4ee5\u53ca\u7f51\u7edc\u4e0a\u4f20\u9001\u7684\u6570\u636e)\uff0c\u90fd\u662f\u7531\u4e00\u4e32\u6bd4\u7279\u8868\u793a\u7684\u3002 \u7a0b\u5e8f\u88ab\u5176\u4ed6\u7a0b\u5e8f\u7ffb\u8bd1\u6210\u4e0d\u540c\u683c\u5f0f \uf0c1 \u9884\u5904\u7406\u9636\u6bb5 \uf0c1 \u9884\u5904\u7406\u5668(cpp)\u6839\u636e\u4ee5#\u5f00\u5934\u7684\u547d\u4ee4\uff0c\u4fee\u6539\u539f\u59cbC\u7a0b\u5e8f\u3002\u6bd4\u5982hello.c\u4e2d\u7b2c1\u884c\u7684 #include<stdio.h> \u547d\u4ee4\u544a\u8bc9\u9884\u5904\u7406\u5668\u8bfb\u53d6\u7cfb\u7edf\u5934\u6587\u4ef6 stdio.h \u7684\u5185\u5bb9\uff0c\u5e76\u628a\u5b83\u76f4\u63a5\u63d2\u5165\u7a0b\u5e8f\u6587\u672c\u4e2d\u3002\u7ed3\u679c\u5c31\u5f97\u5230\u4e86\u53e6\u4e00\u4e2aC\u7a0b\u5e8f\uff0c\u901a\u5e38\u4ee5 .i \u4f5c\u4e3a\u6587\u4ef6\u6269\u5c55\u540d\u3002 gcc -E helloworld.c -o helloworld.i \u7f16\u8bd1\u9636\u6bb5 \uf0c1 \u7f16\u8bd1\u5668(ccl)\u5c06\u6587\u672c\u6587\u4ef6 helloworld.i \u7ffb\u8bd1\u6210\u6587\u672c\u6587\u4ef6 helloworld.s \uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u6c47\u7f16\u8bed\u8a00\u7a0b\u5e8f\u3002\u8be5\u7a0b\u5e8f\u5305\u542b\u51fd\u6570main\u7684\u5b9a\u4e49\uff0c\u5176\u4e2d\u7684\u6bcf\u4e00\u6761\u8bed\u53e5\u90fd\u4ee5\u4e00\u79cd\u6587\u672c\u683c\u5f0f\u63cf\u8ff0\u4e86\u4e00\u6761\u4f4e\u7ea7\u673a\u5668\u8bed\u8a00\u6307\u4ee4\u3002\u6c47\u7f16\u8bed\u8a00\u4e3a\u4e0d\u540c\u9ad8\u7ea7\u8bed\u8a00\u7684\u4e0d\u540c\u6c47\u7f16\u5668\u63d0\u4f9b\u4e86\u901a\u7528\u7684\u8f93\u51fa\u8bed\u8a00\u3002\u4f8b\u5982C\u7f16\u8bd1\u5668\u548cFortran\u7f16\u8bd1\u5668\u4ea7\u751f\u7684\u8f93\u51fa\u6587\u4ef6\u7528\u7684\u90fd\u662f\u4e00\u6837\u7684\u6c47\u7f16\u8bed\u8a00\u3002 gcc -S helloworld.i -o helloworld.s \u6c47\u7f16\u9636\u6bb5 \uf0c1 \u6c47\u7f16\u5668(as)\u5c06 helloworld.s \u7ffb\u8bd1\u6210\u673a\u5668\u8bed\u8a00\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u6307\u4ee4\u6253\u5305\u6210\u4e00\u79cd\u53eb\u505a \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u7a0b\u5e8f(relocatable object program) \u7684\u683c\u5f0f\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5728\u76ee\u6807\u6587\u4ef6 helloworld.o \u4e2d\u3002 helloworld.o \u6587\u4ef6\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u768417\u4e2a\u5b57\u8282\u662f\u51fd\u6570 main \u7684\u6307\u4ee4\u7f16\u7801\u3002 gcc -c helloworld.s -o helloworld.o \u94fe\u63a5\u9636\u6bb5 \uf0c1 helloworld.c \u7a0b\u5e8f\u4e2d\u8c03\u7528\u4e86 printf \u51fd\u6570\uff0c\u5b83\u662fC\u7f16\u8bd1\u5668\u63d0\u4f9b\u7684\u6807\u51c6C\u5e93\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\u3002 printf \u51fd\u6570\u5b58\u5728\u4e8e\u4e00\u4e2a\u540d\u4e3a printf.o \u7684\u5355\u72ec\u7684\u9884\u7f16\u8bd1\u597d\u4e86\u7684\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u9700\u8981\u7528\u67d0\u79cd\u65b9\u5f0f\u5408\u5e76\u5230\u6211\u4eec\u7684 helloworld.o \u7a0b\u5e8f\u4e2d\u3002\u94fe\u63a5\u5668(ld)\u5c31\u662f\u8d1f\u8d23\u5904\u7406\u8fd9\u79cd\u5408\u5e76\uff0c\u6700\u540e\u4f1a\u5f97\u5230hello\u53ef\u6267\u884c\u6587\u4ef6\u3002 gcc helloworld.o -o helloworld GUN\u9879\u76ee\u7ec4\u6210 Linux\u5185\u6838 Emacs\u7f16\u8f91\u5668 Gcc\u7f16\u8bd1\u5668 Gdb\u8c03\u8bd5\u5668 \u6c47\u7f16\u5668 \u94fe\u63a5\u5668 \u5904\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5de5\u5177\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u90e8\u4ef6 \u4e86\u89e3\u7f16\u8bd1\u7cfb\u7edf\u5982\u4f55\u5de5\u4f5c\u6709\u4f55\u76ca\u5904 \uf0c1 \u4f18\u5316\u7a0b\u5e8f\u6027\u80fd \u7406\u89e3\u94fe\u63a5\u65f6\u51fa\u73b0\u7684\u9519\u8bef \u907f\u514d\u5b89\u5168\u6f0f\u6d1e \u5904\u7406\u5668\u8bfb\u5e76\u89e3\u91ca\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u7684\u6307\u4ee4 \uf0c1 Shell\u662f\u4ec0\u4e48\uff1f \uf0c1 \u547d\u4ee4\u884c\u89e3\u91ca\u5668\uff0c\u8f93\u51fa\u4e00\u4e2a\u5b57\u7b26\uff0c\u7b49\u5f85\u8f93\u5165\u4e00\u4e2a\u547d\u4ee4\u884c\uff0c\u7136\u540e\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4 \u5982\u679c\u8f93\u5165\u547d\u4ee4\u884c\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u4e0d\u662f\u4e00\u4e2a\u5185\u7f6e\u7684shell\u547d\u4ee4\uff0c\u90a3\u4e48shell\u5c31\u4f1a\u5047\u8bbe\u8fd9\u4e2a\u662f\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u4f1a\u52a0\u8f7d\u5e76\u8fd0\u884c\u8fd9\u4e2a\u6587\u4ef6 \u7cfb\u7edf\u7684\u786c\u4ef6\u7ec4\u6210 \uf0c1 \u603b\u7ebf \u8d2f\u7a7f\u6574\u4e2a\u7cfb\u7edf\u7684\u4e00\u7ec4\u7535\u5b50\u7ba1\u9053\uff0c\u5b83\u643a\u5e26\u4fe1\u606f\u5b57\u8282\u5e76\u8d1f\u8d23\u5728\u5404\u4e2a\u90e8\u4ef6\u4e4b\u95f4\u4f20\u9012\u3002\u901a\u5e38\u603b\u7ebf\u4e2d\u4f20\u8f93\u7684\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\u5b57\u8282\u5757\uff0c\u4e5f\u5c31\u662f\u5b57\uff08word\uff09\u3002\u5b57\u4e2d\u7684\u5b57\u8282\u6570\uff08\u5b57\u957f\uff09\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u7cfb\u7edf\u53c2\u6570\u3002\u4e0d\u540c\u7cfb\u7edf\u5b57\u957f\u4e0d\u540c\u3002\u6bd4\u598232\u4f4d\u7cfb\u7edf\u7684\u5b57\u957f\u4e3a4\u4e2a\u5b57\u8282\uff0c64\u4f4d\u7cfb\u7edf\u7684\u5b57\u957f\u4e3a8\u4e2a\u5b57\u8282\u3002 I/O\u8bbe\u5907 \u7cfb\u7edf\u548c\u5916\u90e8\u4e16\u754c\u7684\u8054\u7cfb\u901a\u9053\uff0c\u5305\u62ec\u7528\u6237\u8f93\u5165\u7684\u952e\u76d8\u548c\u9f20\u6807\uff0c\u7528\u6237\u8f93\u51fa\u7684\u663e\u793a\u5668\uff0c\u957f\u671f\u5b58\u50a8\u6570\u636e\u548c\u7a0b\u5e8f\u7684\u78c1\u76d8\u9a71\u52a8\u5668\u3002I/O\u8bbe\u5907\u9700\u8981\u63a7\u5236\u5668\u6216\u9002\u914d\u5668\u548cI/O\u603b\u7ebf\u76f8\u4e92\u8fde\u63a5\u3002 \u63a7\u5236\u5668\u662fI/O\u8bbe\u5907\u672c\u8eab\u6216\u8005\u7cfb\u7edf\u7684\u4e3b\u5370\u5237\u7535\u8def\u677f\u4e0a\u7684\u82af\u7247\u7ec4 \u9002\u914d\u5668\u662f\u4e00\u5757\u63d2\u5728\u4e3b\u677f\u63d2\u69fd\u4e0a\u7684\u5361 \u63a7\u5236\u5668\u548c\u9002\u914d\u5668\u7684\u529f\u80fd\u90fd\u662f\u5728I/O\u603b\u7ebf\u548cI/O\u8bbe\u5907\u4e4b\u95f4\u4f20\u9012\u4fe1\u606f \u4e3b\u5b58 \u4e34\u65f6\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u5904\u7406\u5668\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\uff0c\u7528\u6765\u5b58\u653e\u7a0b\u5e8f\u548c\u7a0b\u5e8f\u5904\u7406\u7684\u6570\u636e \u7269\u7406\u4e0a\u7531\u52a8\u6001\u968f\u673a\u5b58\u53d6\u5b58\u50a8\u5668(DRAM)\u82af\u7247\u7ec4\u6210 \u903b\u8f91\u4e0a\u662f\u7ebf\u6027\u5b57\u8282\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5b57\u8282\u90fd\u6709\u552f\u4e00\u7684\u5730\u5740(\u6570\u7ec4\u7d22\u5f15)\uff0c\u5730\u5740\u4ece\u96f6\u5f00\u59cb\u3002 \u5904\u7406\u5668 \u89e3\u91ca\u6216\u8005\u6267\u884c\u5b58\u50a8\u5728\u4e3b\u5b58\u4e2d\u6307\u4ee4\u7684\u5f15\u64ce\uff0c\u6838\u5fc3\u662f\u5927\u5c0f\u4e3a\u4e00\u4e2a\u5b57\u7684\u5b58\u50a8\u8bbe\u5907(\u5bc4\u5b58\u5668)\uff0c\u6210\u4e3a\u7a0b\u5e8f\u8ba1\u6570\u5668(PC)\uff0c\u4efb\u4f55\u65f6\u523b\uff0cPC\u5747\u6307\u5411\u4e3b\u5b58\u4e2d\u7684\u67d0\u6761\u673a\u5668\u8bed\u8a00\u6307\u4ee4 \u5904\u7406\u5668\u4ece\u7cfb\u7edf\u901a\u7535\u5f00\u59cb\u4e00\u76f4\u4e0d\u65ad\u6267\u884c\u7a0b\u5e8f\u8ba1\u6570\u5668\u6307\u5411\u7684\u6307\u4ee4\uff0c\u518d\u66f4\u65b0\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\u3002\u770b\u4e0a\u53bb\u662f\u4e00\u4e2a\u6307\u4ee4\u6267\u884c\u6a21\u578b\u64cd\u4f5c\u7684\uff0c\u6a21\u578b\u7531 \u6307\u4ee4\u96c6\u67b6\u6784 \u51b3\u5b9a \u5904\u7406\u5668\u56f4\u7ed5\u4e3b\u5b58\u3001\u5bc4\u5b58\u5668\u4ee5\u53ca\u7b97\u672f/\u903b\u8f91\u5355\u5143(ALU)\u8fdb\u884c \u52a0\u8f7d\uff1a\u4ece\u4e3b\u5b58\u590d\u5236\u4e00\u4e2a\u5b57\u8282\u6216\u8005\u4e00\u4e2a\u5b57\u5230\u5bc4\u5b58\u5668\uff0c\u8986\u76d6\u5bc4\u5b58\u5668\u539f\u6765\u7684\u5185\u5bb9 \u5b58\u50a8\uff1a\u4ece\u5bc4\u5b58\u5668\u590d\u5236\u4e00\u4e2a\u5b57\u8282\u6216\u8005\u4e00\u4e2a\u5b57\u5230\u4e3b\u5b58\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u8986\u76d6\u8fd9\u4e2a\u4f4d\u7f6e\u539f\u6765\u7684\u5185\u5bb9 \u64cd\u4f5c\uff1a\u628a\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u590d\u5236\u5230ALU\uff0c\u7136\u540eALU\u4f1a\u5bf9\u4e24\u4e2a\u5b57\u505a\u7b97\u672f\u8fd0\u7b97\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u653e\u5230\u4e00\u4e2a\u5bc4\u5b58\u5668\u4e2d\uff0c\u8986\u76d6\u8be5\u5bc4\u5b58\u5668\u4e2d\u539f\u6765\u7684\u5185\u5bb9 \u8df3\u8f6c\uff1a\u4ece\u6307\u4ee4\u672c\u8eab\u4e2d\u62bd\u53d6\u4e00\u4e2a\u5b57\uff0c\u5e76\u5c06\u8fd9\u4e2a\u5b57\u590d\u5236\u5230\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c\u8986\u76d6PC\u4e2d\u539f\u6765\u7684\u503c \u8fd0\u884chello\u7a0b\u5e8f \uf0c1 shell\u8bfb\u53d6hello\u5b57\u7b26\u4e32 \uf0c1 shell\u8bfb\u53d6\u6211\u4eec\u4ece\u952e\u76d8\u4e0a\u8f93\u5165\u7684\u5b57\u7b26\u4e32 ./hello \u4e4b\u540e\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u4fe1\u606f\u6d41\u5982\u4e0b\u56fe\u7ea2\u7ebf\u6240\u793a shell\u7a0b\u5e8f\u9700\u8981\u628a\u7528\u6237\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u4e00\u4e2a\u53d8\u91cf\u4f7f\u7528\uff0c\u8fd9\u4e2a\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u4e00\u5b9a\u4f1a\u6709\u4e2a\u5730\u5740\uff0c\u56e0\u6b64\u5b83\u6700\u7ec8\u4f1a\u8fbe\u5230\u4e3b\u5b58\uff0c\u4fe1\u606f\u6d41\u5982\u4e0b \u952e\u76d8 -> USB\u63a7\u5236\u5668 -> I/O\u603b\u7ebf -> I/O\u6865 -> \u7cfb\u7edf\u603b\u7ebf -> \u5bc4\u5b58\u5668 -> \u7cfb\u7edf\u603b\u7ebf -> I/O\u6865 -> \u5185\u5b58\u603b\u7ebf -> \u4e3b\u5b58 \u4e3b\u5b58\u52a0\u8f7dhello\u7a0b\u5e8f \uf0c1 \u5728\u952e\u76d8\u6572\u51fb\u56de\u8f66\u952e\uff0cshell\u7a0b\u5e8f\u77e5\u9053\u6211\u4eec\u7ed3\u675f\u4e86\u547d\u4ee4\u7684\u8f93\u5165\uff0cshell\u4f1a\u6267\u884c\u4e00\u7cfb\u5217\u7684\u6307\u4ee4\u6765\u52a0\u8f7d\u53ef\u6267\u884c\u7684hello\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6307\u4ee4\u4f1a\u5c06hello\u76ee\u6807\u6587\u4ef6\u4e2d\u7684 \u4ee3\u7801\u548c\u6570\u636e\u4ece\u78c1\u76d8\u590d\u5236\u5230\u4e3b\u5b58 ,\u6570\u636e\u5305\u62ec\u6700\u7ec8\u4f1a\u88ab\u8f93\u51fa\u7684\u5b57\u7b26\u4e32 hello world ,\u4fe1\u606f\u6d41\u5982\u4e0b \u78c1\u76d8 -> \u78c1\u76d8\u63a7\u5236\u5668 -> I/O\u603b\u7ebf -> I/O\u6865 -> \u5185\u5b58\u603b\u7ebf -> \u4e3b\u5b58 \u8fd9\u79cd\u8bbf\u95ee\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u6570\u636e\u4e0d\u4f1a\u7ecf\u8fc7CPU\uff0c\u800c\u662f\u76f4\u63a5\u4ece\u78c1\u76d8\u5230\u4e3b\u5b58\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3aDMA DMA\u76f4\u63a5\u5b58\u50a8\u5668\u8bbf\u95ee\uff0c\u6709\u5229\u4e8e\u51cf\u8f7bCPU\u8d1f\u8377\uff0c\u4f7f\u5f97CPU\u53ef\u4ee5\u5728\u6570\u636e\u8f6c\u79fb\u7684\u540c\u65f6\u505a\u5176\u4ed6\u4efb\u52a1 \u663e\u793ahello\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c \uf0c1 \u52a0\u8f7d\u5b8chello\u6587\u4ef6\u540e\uff0cCPU\u4ecehello\u7a0b\u5e8f\u7684\u4e3b\u51fd\u6570\u5904\u6267\u884c\u6307\u4ee4\uff0c\u8fd9\u4e9b\u6307\u4ee4\u5c06 hello world\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u8282\u4ece\u4e3b\u5b58\u590d\u5236\u5230\u5bc4\u5b58\u5668\u6587\u4ef6\uff0c\u518d\u4ece\u5bc4\u5b58\u5668\u6587\u4ef6\u4e2d\u590d\u5236\u5230\u663e\u793a\u8bbe\u5907 ,\u6700\u7ec8\u4f1a\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\uff0c\u4fe1\u606f\u6d41\u5982\u4e0b \u4e3b\u5b58 -> \u5bc4\u5b58\u5668 -> \u7cfb\u7edf\u603b\u7ebf -> I/O\u6865 -> I/O\u603b\u7ebf -> \u56fe\u5f62\u9002\u914d\u5668 -> \u663e\u793a\u5668 \u9ad8\u901f\u7f13\u5b58 \uf0c1 \u4e0a\u9762\u8fd0\u884c\u7684hello\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u770b\u5230\u6307\u4ee4\u548c\u6570\u636e\u9700\u8981\u591a\u6b21\u5728\u5bc4\u5b58\u5668\u3001\u4e3b\u5b58\u3001\u78c1\u76d8\u4e4b\u95f4\u6765\u56de\u590d\u5236\uff0c\u8fd9\u4e9b\u590d\u5236\u5c31\u662f\u5f00\u9500\uff0c\u51cf\u6162\u4e86\u7a0b\u5e8f\u7684\u5de5\u4f5c\u901f\u5ea6\uff0c\u4f7f\u7528 \u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668 \u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898 L1\u9ad8\u901f\u7f13\u5b58\u7684\u5bb9\u91cf\u53ef\u4ee5\u8fbe\u5230 \u6570\u4e07\u5b57\u8282 ,\u8bbf\u95ee\u901f\u5ea6\u51e0\u4e4e\u548c\u8bbf\u95ee\u5bc4\u5b58\u5668\u6587\u4ef6\u4e00\u6837\u5feb L2\u9ad8\u901f\u7f13\u5b58\u5bb9\u91cf\u4e3a \u6570\u5341\u4e07\u5230\u6570\u767e\u4e07\u5b57\u8282 ,\u901a\u8fc7\u4e00\u6761\u7279\u6b8a\u7684\u603b\u7ebf\u8fde\u63a5\u5230\u5904\u7406\u5668\uff0c\u8fdb\u7a0b\u8bbf\u95eeL2\u9ad8\u901f\u7f13\u5b58\u7684\u65f6\u95f4\u8981\u6bd4\u8bbf\u95eeL1\u9ad8\u901f\u7f13\u5b58\u7684\u65f6\u95f4\u957f5\u500d\uff0c\u4f46\u662f\u4ecd\u7136\u6bd4\u8bbf\u95ee\u4e3b\u5b58\u7684\u65f6\u95f4\u5feb5\uff5e10\u500d L1\u548cL2\u9ad8\u901f\u7f13\u5b58\u662f\u7528\u4e00\u79cd\u53eb\u505a \u9759\u6001\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668(SRAM) \u7684\u786c\u4ef6\u6280\u672f\u5b9e\u73b0\u7684 \u9ad8\u901f\u7f13\u5b58\u5c40\u90e8\u6027\u539f\u7406\uff1a \u7a0b\u5e8f\u5177\u6709\u8bbf\u95ee\u5c40\u90e8\u533a\u57df\u4e2d\u7684\u6570\u636e\u548c\u4ee3\u7801\u7684\u8d8b\u52bf\uff0c\u56e0\u6b64\u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668\u4f5c\u4e3a\u6682\u65f6\u7684\u96c6\u7ed3\u533a\u57df\uff0c\u5b58\u653e\u5904\u7406\u5668\u8fd1\u671f\u53ef\u80fd\u4f1a\u9700\u8981\u7684\u4fe1\u606f \u5b58\u50a8\u8bbe\u5907\u7684\u5c42\u6b21\u7ed3\u6784 \uf0c1 \u81f3\u4e0a\u800c\u4e0b\uff0c\u8bbe\u5907\u7684\u8bbf\u95ee\u901f\u5ea6\u8d8a\u6765\u8d8a\u6162\u3001\u5bb9\u91cf\u8d8a\u6765\u8d8a\u5927\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5b57\u8282\u7684\u9020\u4ef7\u4e5f\u8d8a\u6765\u8d8a\u4fbf\u5b9c\u3002\u5bc4\u5b58\u5668\u6587\u4ef6\u5728\u5c42\u6b21\u7ed3\u6784\u4e2d\u4f4d\u4e8e\u6700\u9876\u90e8\uff0c\u4e5f\u5c31\u662f\u7b2c0\u7ea7\u6216\u8bb0\u4e3aL0 \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u7684\u4e3b\u8981\u601d\u60f3\u662f\u4e0a\u4e00\u5c42\u7684\u5b58\u50a8\u5668\u4f5c\u4e3a\u4f4e\u4e00\u5c42\u5b58\u50a8\u5668\u7684\u9ad8\u901f\u7f13\u5b58\u3002\u56e0\u6b64\uff0c\u5bc4\u5b58\u5668\u6587\u4ef6\u5c31\u662fL1\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL1\u662fL2\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL2\u662fL3\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL3\u662f\u4e3b\u5b58\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u800c\u4e3b\u5b58\u53c8\u662f\u78c1\u76d8\u7684\u9ad8\u901f\u7f13\u5b58\u3002 \u67d0\u4e9b\u5177\u6709\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u7684\u7f51\u7edc\u7cfb\u7edf\u4e2d\uff0c\u672c\u5730\u78c1\u76d8\u5c31\u662f\u5b58\u50a8\u5728\u5176\u4ed6\u7cfb\u7edf\u4e2d\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u7684\u9ad8\u901f\u7f13\u5b58 \u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u786c\u4ef6 \uf0c1 \u64cd\u4f5c\u7cfb\u7edf\u662f\u5e94\u7528\u7a0b\u5e8f\u548c\u786c\u4ef6\u4e4b\u95f4\u63d2\u5165\u7684\u4e00\u5c42\u8f6f\u4ef6\u3002\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u5bf9\u786c\u4ef6\u7684\u64cd\u4f5c\u5c1d\u8bd5\u90fd\u5fc5\u987b\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u3002 \u64cd\u4f5c\u7cfb\u7edf\u7684\u4e24\u4e2a\u57fa\u672c\u529f\u80fd \u9632\u6b62\u786c\u4ef6\u88ab\u5931\u63a7\u7684\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528 \u5411\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7b80\u5355\u4e00\u81f4\u7684\u673a\u5236\u6765\u63a7\u5236\u590d\u6742\u800c\u53c8\u901a\u5e38\u5927\u4e0d\u76f8\u540c\u7684\u4f4e\u7ea7\u786c\u4ef6\u8bbe\u5907 \u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u51e0\u4e2a\u57fa\u672c\u7684\u62bd\u8c61\u6982\u5ff5(\u8fdb\u7a0b\u3001\u865a\u62df\u5185\u5b58\u3001\u6587\u4ef6)\u6765\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u529f\u80fd \u8fdb\u7a0b&\u7ebf\u7a0b \uf0c1 \u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u7684\u4e00\u79cd\u62bd\u8c61,\u4e00\u4e2a\u7cfb\u7edf\u4e0a\u53ef\u4ee5 \u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u8fdb\u7a0b \uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u597d\u50cf\u5728 \u72ec\u5360\u5730\u4f7f\u7528\u786c\u4ef6 \u3002 \u5e76\u53d1\u8fd0\u884c \u662f\u8bf4\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6307\u4ee4\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6307\u4ee4\u662f\u4ea4\u9519\u6267\u884c\u7684 \u4e0a\u4e0b\u6587\uff1a\u64cd\u4f5c\u7cfb\u7edf\u4fdd\u6301\u548c\u8ddf\u8e2a\u8fdb\u7a0b\u8fd0\u884c\u6240\u9700\u7684\u6240\u6709\u72b6\u6001\u4fe1\u606f(PC\u503c\uff0c\u4e3b\u5b58\u7684\u5185\u5bb9\u7b49) \u4e0a\u4e0b\u6587\u5207\u6362\uff1a\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u63a7\u5236\u5904\u7406\u5668\u5728 \u8fdb\u7a0b\u95f4\u5207\u6362 \u4ee5\u8fbe\u5230\u4ea4\u9519\u6267\u884c\u7684\u76ee\u7684 \u4ece\u4e00\u4e2a\u8fdb\u7a0b\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f6c\u6362\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7ba1\u7406\u7684\uff0c\u5185\u6838\u662f\u64cd\u4f5c\u7cfb\u7edf\u4ee3\u7801\u5e38\u9a7b\u4e3b\u5b58\u7684\u90e8\u5206\uff0c\u5185\u6838\u4e0d\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\uff0c\u5b83\u662f\u7cfb\u7edf\u7ba1\u7406\u5168\u90e8\u8fdb\u7a0b \u6240\u7528\u4ee3\u7801\u548c\u6570\u636e\u7ed3\u6784\u7684\u96c6\u5408 \u4e00\u4e2a\u8fdb\u7a0b\u662f\u7531\u591a\u4e2a\u79f0\u4e3a\u7ebf\u7a0b\u7684\u6267\u884c\u5355\u5143\u7ec4\u6210\uff0c \u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u8fd0\u884c\u5728\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u5e76\u5171\u4eab\u540c\u6837\u7684\u4ee3\u7801\u548c\u5168\u5c40\u6570\u636e \u3002\u591a\u7ebf\u7a0b\u6bd4\u591a\u8fdb\u7a0b\u66f4\u5bb9\u6613\u5171\u4eab\u6570\u636e\uff0c\u800c\u4e14\u7ebf\u7a0b\u95f4\u5207\u6362\u6240\u6709\u7684\u5f00\u9500\u8fdc\u5c0f\u4e8e\u8fdb\u7a0b\u5207\u6362 \u865a\u62df\u5185\u5b58 \uf0c1 \u865a\u62df\u5185\u5b58\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u4e3a\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5047\u8c61\uff0c \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5728\u72ec\u5360\u5730\u4f7f\u7528\u4e3b\u5b58 \u3002\u6bcf\u4e2a\u8fdb\u7a0b\u770b\u5230\u7684\u5185\u5b58\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u79f0\u4e3a \u865a\u62df\u5730\u5740\u7a7a\u95f4 \u865a\u62df\u5730\u5740\u7a7a\u95f4\u5206\u4e3a\u4e86\u82e5\u5e72\u4e2a\u90e8\u5206\uff0c\u5e76\u7528 \u7bad\u5934\u8868\u793a\u8be5\u90e8\u5206\u7684\u6269\u5c55\u65b9\u5411 \uff0c\u6700\u4e0b\u7aef\u5730\u5740\u4e3a0\uff0c\u5411\u4e0a\u5730\u5740\u9010\u6e10\u589e\u957f\uff0c\u6bcf\u4e2a\u90e8\u5206\u7684\u4f5c\u7528\u5982\u4e0b\uff1a \u7a0b\u5e8f\u4ee3\u7801\u548c\u6570\u636e\uff1a\u5b58\u653e\u53ef\u6267\u884c\u7a0b\u5e8f\u4ee3\u7801\u548c\u4ee3\u7801\u4e2d\u7684\u5168\u5c40\u53d8\u91cf \u5806\uff1a\u4ee3\u7801\u548c\u6570\u636e\u533a\u540e\u7d27\u968f\u7740\u7684\u662f\u8fd0\u884c\u65f6\u5806\uff0c\u7528\u4e8e\u52a8\u6001\u7533\u8bf7\u7684\u5185\u5b58\u53d8\u91cf\uff0c\u6bd4\u5982malloc\u51fd\u6570\u7533\u8bf7\u7684\u52a8\u6001\u5185\u5b58\u7a7a\u95f4\uff0c\u53ef\u4ee5\u5411\u4e0a\u6269\u5c55 \u5171\u4eab\u5e93\uff1a\u7528\u4e8e\u5b58\u653eC\u8bed\u8a00\u5e93\u51fd\u6570\u7684\u4ee3\u7801\u548c\u6570\u636e\u3002\u672c\u4f8b\u4e2d\u5373printf\u7684\u4ee3\u7801\u548c\u6570\u636e \u6808\uff1a\u4f4d\u4e8e\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u9876\u90e8\uff0c\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u3001\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u7b49\u3002\u5f53\u6211\u4eec\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u6808\u4f1a\u5411\u4e0b\u6269\u5c55\uff0c\u8fd4\u56de\u65f6\uff0c\u5411\u4e0a\u6536\u7f29 \u5185\u6838\u865a\u62df\u5185\u5b58\uff1a\u5730\u5740\u7a7a\u95f4\u9876\u90e8\u7684\u533a\u57df\u662f\u4e3a\u5185\u6838\u4fdd\u7559\u7684\u3002\u4e0d\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u8bfb\u5199\u8fd9\u4e2a\u533a\u57df\u7684\u5185\u5bb9\u6216\u8005\u76f4\u63a5\u8c03\u7528\u5185\u6838\u4ee3\u7801\u5b9a\u4e49\u7684\u51fd\u6570\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u5fc5\u987b\u8c03\u7528\u5185\u6838\u6765\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002\u5bf9\u4e8e\u4e00\u4e2a64\u4f4d\u7684\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0c\u7528\u6237\u7a7a\u95f4\u4e3a0-3G,\u5185\u6838\u7a7a\u95f4\u4e3a3G-4G \u6587\u4ef6 \uf0c1 \u6587\u4ef6\u5b9e\u8d28\u4e0a\u662f\u5b57\u8282\u5e8f\u5217\uff0c\u8ba1\u7b97\u673a\u4e0a\u7684I/O\u8bbe\u5907\uff0c\u5305\u62ec\u78c1\u76d8\u3001\u952e\u76d8\u3001\u663e\u793a\u5668\u3001\u7f51\u7edc\u7b49\u90fd\u53ef\u4ee5\u770b\u6210\u6587\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6240\u6709\u7684I/O\u8bbe\u5907\u770b\u6210\u662f\u6587\u4ef6\uff0c\u6587\u4ef6\u662f\u5b57\u8282\u5e8f\u5217\uff0c\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u8f93\u5165\u8f93\u51fa\u53ef\u4ee5\u8c03\u7528\u7cfb\u7edf\u51fd\u6570( Unix I/O\u7cfb\u7edf\u51fd\u6570\u8c03\u7528\u8bfb\u5199\u6587\u4ef6 )\u6765\u8bfb\u5199\u6587\u4ef6\u5b9e\u73b0\u6765\u5b9e\u73b0\u7684 \u7f51\u7edc \uf0c1 \u4ece\u4e00\u4e2a\u5355\u72ec\u7684\u7cfb\u7edf\u6765\u770b\uff0c\u7f51\u7edc\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2aI/O\u8bbe\u5907 \u5f53\u64cd\u4f5c\u7cfb\u7edf\u4ece\u4e3b\u5b58\u590d\u5236\u4e00\u4e32\u5b57\u8282\u5230 \u7f51\u7edc\u9002\u914d\u5668 \u65f6\uff0c\u8ba1\u7b97\u673a\u4f1a\u81ea\u52a8\u5c06\u5176\u53d1\u9001\u5230\u53e6\u4e00\u53f0\u673a\u5668 \u5e76\u53d1\u548c\u5e76\u884c \uf0c1 \u5e76\u53d1Concurrency\uff1a\u5355\u6838CPU\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u6761\u6307\u4ee4\u6267\u884c\uff0c\u4f46\u5f88\u591a\u4e2a\u8fdb\u7a0b\u6307\u4ee4\u88ab\u5feb\u901f\u8f6e\u6362\u6267\u884c\uff0c\u4f7f\u5f97\u5b8f\u89c2\u4e0a\u5177\u6709\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u6267\u884c\u7684\u6548\u679c\u3002\u4f46\u662f\u5fae\u89c2\u4e0a\u5e76\u4e0d\u662f\u540c\u65f6\u6267\u884c\u7684\uff0c\u53ea\u662f\u5728\u4e00\u5b9a\u7684\u65f6\u95f4\u7247\u91cc\uff0c\u5feb\u901f\u4ea4\u66ff\u6267\u884c\u591a\u4e2a\u8fdb\u7a0b \u5e76\u884cParallelism\uff1a\u540c\u4e00\u65f6\u523b\uff0c\u6709\u591a\u6761\u6307\u4ee4\u5728\u591a\u4e2a\u5904\u7406\u5668\u4e0a\u540c\u65f6\u6267\u884c\u3002\u82e5\u7cfb\u7edf\u5185\u53ea\u6709\u4e00\u4e2a CPU\uff0c\u5bf9\u4e8e\u591a\u7ebf\u7a0b\u4efb\u52a1\uff0c\u8fd9\u4e9b\u4efb\u52a1\u4e0d\u53ef\u80fd\u771f\u5b9e\u5e76\u884c\u7684\uff0c\u56e0\u4e3a\u4e00\u4e2a CPU \u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u591a\u7ebf\u7a0b\u6216\u8005\u591a\u7ebf\u7a0b\u4efb\u52a1\u5c31\u662f\u5e76\u53d1\u7684\uff0c\u800c\u4e0d\u662f\u5e76\u884c\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u505c\u5730\u5207\u6362\u4efb\u52a1\u3002\u771f\u6b63\u7684\u5e76\u53d1\u4e5f\u53ea\u80fd\u591f\u51fa\u73b0\u5728\u62e5\u6709\u591a\u4e2a CPU \u7684\u7cfb\u7edf\u4e2d\uff08\u591a\u6838CPU\uff09 \u7ebf\u7a0b\u7ea7\u5e76\u53d1 \uf0c1 \u5355CPU\u7cfb\u7edf \u5355CPU\u7cfb\u7edf\u4e2d\uff0c\u901a\u8fc7\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5e76\u53d1\u53ef\u4ee5\u8bbe\u8ba1\u51fa\u591a\u4e2a\u7a0b\u5e8f\u6267\u884c\u7684\u7cfb\u7edf \u901a\u8fc7\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5e76\u53d1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u6267\u884c\u591a\u4e2a\u63a7\u5236\u6d41 \u591aCPU\u7cfb\u7edf(\u8d85\u7ebf\u7a0b+\u591a\u6838CPU) \u591a\u6838CPU \u8d85\u7ebf\u7a0b \u540c\u65f6\u591a\u7ebf\u7a0b\uff0c\u5141\u8bb8\u4e00\u4e2aCPU\u6267\u884c\u591a\u4e2a\u63a7\u5236\u6d41\u7684\u6280\u672f Intel Core i7 cpu\u53ef\u4ee5\u8ba9\u6bcf\u4e2a\u6838\u6267\u884c\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4e00\u4e2a4\u6838\u7684\u7cfb\u7edf\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5e76\u884c\u6267\u884c8\u4e2a\u7ebf\u7a0b \u6307\u4ee4\u7ea7\u5e76\u53d1 \uf0c1 \u4e00\u4e2a\u6307\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\u901a\u5e38\u5305\u62ec\u5982\u4e0b\u4e09\u4e2a\u9636\u6bb5\uff1a \u53d6\u6307\u4ee4\u9636\u6bb5 \u89e3\u7801\u9636\u6bb5 \u6267\u884c\u6307\u4ee4\u9636\u6bb5 \u6700\u521d\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u662f\u6bcf\u4e2a\u6307\u4ee4\u7ecf\u8fc7\u4e00\u6574\u4e2a\u8fc7\u7a0b\u540e\uff0c\u624d\u8fd0\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 \u5b9e\u9645\u4e0a\u6bcf\u4e2a\u9636\u6bb5\u4f7f\u7528\u7684\u662f\u5904\u7406\u5668\u4e2d\u7684\u4e0d\u540c\u786c\u4ef6\u90e8\u5206\uff0c\u8fd9\u6837\u5b50\u53ef\u4ee5\u6d41\u6c34\u7ebf\u7684\u8fd0\u884c\u591a\u6761\u6307\u4ee4\uff0c\u8fbe\u5230\u5dee\u4e0d\u591a\u4e00\u4e2a\u59cb\u7ec8\u5468\u671f\u8fd0\u884c\u4e00\u6761\u6307\u4ee4 CPU\u987a\u5e8f\u5904\u7406\u6307\u4ee4 CPU\u5e76\u884c\u5904\u7406\u6307\u4ee4 \u8d85\u6807\u91cf\u5904\u7406\u5668:\u5904\u7406\u5668\u53ef\u4ee5\u8fbe\u5230\u6bd4\u4e00\u4e2a\u5468\u671f\u4e00\u6761\u6307\u4ee4\u66f4\u5feb\u7684\u6267\u884c\u901f\u7387 \u5355\u6307\u4ee4\u3001\u591a\u6570\u636e\u5e76\u884c \uf0c1 \u5f88\u591a\u73b0\u4ee3\u5904\u7406\u5668\u62e5\u6709\u7279\u6b8a\u7684\u786c\u4ef6\uff0c\u5141\u8bb8\u4e00\u6761\u6307\u4ee4\u4ea7\u751f\u591a\u4e2a\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e4b\u4e3a\u5355\u6307\u4ee4\u3001\u591a\u6570\u636e\uff0c\u5373 SIMD\u5e76\u884c Amdahl\u5b9a\u5f8b \uf0c1 Amdahl\u5b9a\u5f8b\u662f\u5bf9\u63d0\u5347\u7cfb\u7edf\u67d0\u4e00\u90e8\u5206\u6027\u80fd\u6240\u5e26\u6765\u7684\u6548\u679c\u8fdb\u884c\u91cf\u5316\uff1a\u5f53\u6211\u4eec\u5bf9\u7cfb\u7edf\u67d0\u90e8\u5206\u52a0\u901f\u65f6\uff0c\u5176\u5bf9\u7cfb\u7edf\u6574\u4f53\u6027\u80fd\u7684\u5f71\u54cd\u53d6\u51b3\u4e8e\u8be5\u90e8\u5206\u7684 \u91cd\u8981\u6027 \u548c \u52a0\u901f\u7a0b\u5ea6 \u5047\u8bbe\u67d0\u5e94\u7528\u7a0b\u5e8f\u539f\u59cb\u6267\u884c\u65f6\u95f4T_old, \u67d0\u90e8\u5206\u6240\u9700\u6267\u884c\u65f6\u95f4\u4e0e\u8be5\u65f6\u95f4\u7684\u6bd4\u4f8b\u4e3aa\uff0c\u8be5\u90e8\u5206\u63d0\u5347\u6bd4\u4f8b\u4e3ak\uff0c\u5219\u603b\u6267\u884c\u65f6\u95f4\u4e3a\uff1a T_new = (1-a)T_old + aT_old/k = T_old[(1-a]+a/k] \u52a0\u901f\u6bd4\u4e3a S = 1/[(1-a) + a/k] \u5f53k\u8d8b\u5411\u4e8e\u65e0\u7a77\u65f6\uff0c\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8be5\u90e8\u5206\u52a0\u901f\u5230\u6781\u9650\u65f6\u6240\u80fd\u5f97\u5230\u7684\u52a0\u901f\u6bd4\u4e3a\uff1aS=1/(1-a) \u8be5\u5b9a\u5f8b\u63d0\u4f9b\u4e00\u4e2a\u4e3b\u8981\u89c2\u70b9\uff1a \u8981\u60f3\u663e\u8457\u52a0\u901f\u6574\u4e2a\u7cfb\u7edf\uff0c\u5fc5\u987b\u63d0\u5347\u5168\u7cfb\u7edf\u4e2d\u76f8\u5f53\u5927\u7684\u90e8\u5206\u7684\u901f\u5ea6 \u5c0f\u7ed3 \uf0c1 \u8ba1\u7b97\u673a\u7cfb\u7edf\u7531\u786c\u4ef6\u548c\u7cfb\u7edf\u8f6f\u4ef6\u7ec4\u6210\uff0c\u4ed6\u4eec\u5171\u540c\u534f\u4f5c\u4ee5\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f \u8ba1\u7b97\u673a\u5185\u90e8\u4fe1\u606f\u88ab\u8868\u793a\u6210\u4e00\u7ec4\u7ec4\u7684\u4f4d \u7a0b\u5e8f\u88ab\u7ffb\u8bd1\u6210\u4e0d\u540c\u5f62\u5f0f\uff0c\u5f00\u59cb\u662fASCII\u6587\u672c\uff0c\u7136\u540e\u88ab\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u7ffb\u8bd1\u6210\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 \u5904\u7406\u5668\u8bfb\u53d6\u5e76\u89e3\u91ca\u5b58\u653e\u5728\u4e3b\u5b58\u91cc\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4 \u4e3b\u5b58\u3001I/O\u8bbe\u5907\u548cCPU\u5bc4\u5b58\u5668\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u7cfb\u7edf\u4e2d\u7684\u5b58\u50a8\u8bbe\u5907\u5212\u5206\u6210\u4e86\u5c42\u6b21\u7ed3\u6784\uff1aCPU\u5bc4\u5b58\u5668\u5728\u9876\u90e8\uff0c\u63a5\u7740\u662f\u591a\u5c42\u7684\u786c\u4ef6\u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668\uff0cDRAM\u4e3b\u5b58\u548c\u78c1\u76d8\u5b58\u50a8\u5668 \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u662f\u5e94\u7528\u7a0b\u5e8f\u548c\u786c\u4ef6\u4e4b\u95f4\u7684\u5a92\u4ecb\uff0c\u63d0\u4f9b\u4e09\u4e2a\u57fa\u672c\u7684\u62bd\u8c61\uff1a1\uff09\u6587\u4ef6\u662f\u5bf9I/O\u8bbe\u5907\u7684\u62bd\u8c61\uff1b2\uff09\u865a\u62df\u5185\u5b58\u662f\u5bf9\u4e3b\u5b58\u548c\u78c1\u76d8\u7684\u62bd\u8c61\uff1b3\uff09\u8fdb\u7a0b\u662f\u5904\u7406\u5668\u3001\u4e3b\u5b58\u548cI/O\u8bbe\u5907\u7684\u62bd\u8c61 \u7f51\u7edc\u63d0\u4f9b\u4e86\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e4b\u95f4\u901a\u4fe1\u7684\u624b\u6bb5\uff0c\u4ece\u7279\u6b8a\u7cfb\u7edf\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7f51\u7edc\u662f\u4e00\u79cdI/O\u8bbe\u5907 \u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406 \uf0c1 \u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a \uf0c1 \u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784 \uf0c1 \u4f18\u5316\u7a0b\u5e8f\u6027\u80fd \uf0c1 \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784 \uf0c1 \u94fe\u63a5 \uf0c1 \u5f02\u5e38\u63a7\u5236\u6d41 \uf0c1 \u865a\u62df\u5185\u5b58 \uf0c1 \u7cfb\u7edf\u7ea7I/O \uf0c1 \u7f51\u7edc\u7f16\u7a0b \uf0c1 \u5e76\u53d1\u7f16\u7a0b \uf0c1","title":"\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf"},{"location":"csapp/#_1","text":"","title":"\u6df1\u5165\u7406\u89e3\u8ba1\u7b97\u673a\u7cfb\u7edf"},{"location":"csapp/#_2","text":"\u6709\u5982\u4e0b\u6e90\u4ee3\u7801 helloworld.c #include<stdio.h> int main(){ printf(\"hello, world!\"); return 0; }","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u6f2b\u6e38"},{"location":"csapp/#_3","text":"\u6e90\u7a0b\u5e8f\u662f0\u548c1\u7ec4\u6210\u7684\u4f4d(\u53c8\u79f0\u4e4b\u4e3a\u6bd4\u7279bit)\u5e8f\u5217\uff0c8\u4e2a\u4f4d\u88ab\u7ec4\u7ec7\u6210\u4e00\u7ec4\uff0c\u79f0\u4e4b\u4e3a\u5b57\u8282Byte\u3002 1Byte=8bit, 1KB=1024Byte, 1M=1024KB, 1G=1024M, 1G=1024*1024*1024Byte=10^9Byte \u6bcf\u4e2a\u5b57\u8282\u8868\u793a\u7a0b\u5e8f\u4e2d\u7684\u67d0\u4e9b\u6587\u672c\u5b57\u7b26\u3002 \u5927\u90e8\u5206\u7684\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u90fd\u4f7f\u7528ASCII\u6807\u51c6\u6765\u8868\u793a\u6587\u672c\u5b57\u7b26\u3002 \u603b\u7ed3: helloworld.c \u7a0b\u5e8f\u662f\u4ee5\u5b57\u8282\u5e8f\u5217\u7684\u65b9\u5f0f\u5b58\u50a8\u5728\u6587\u4ef6\u4e2d\u7684\uff0c\u8fd9\u79cd\u8868\u793a\u65b9\u6cd5\u8bf4\u660e\u4e86\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u4fe1\u606f(\u5305\u62ec\u78c1\u76d8\u6587\u4ef6\u3001\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f\u3001\u5185\u5b58\u4e2d\u5b58\u653e\u7684\u7528\u6237\u6570\u636e\u4ee5\u53ca\u7f51\u7edc\u4e0a\u4f20\u9001\u7684\u6570\u636e)\uff0c\u90fd\u662f\u7531\u4e00\u4e32\u6bd4\u7279\u8868\u793a\u7684\u3002","title":"\u4fe1\u606f\u5c31\u662f\u4f4d+\u4e0a\u4e0b\u6587"},{"location":"csapp/#_4","text":"","title":"\u7a0b\u5e8f\u88ab\u5176\u4ed6\u7a0b\u5e8f\u7ffb\u8bd1\u6210\u4e0d\u540c\u683c\u5f0f"},{"location":"csapp/#_5","text":"\u9884\u5904\u7406\u5668(cpp)\u6839\u636e\u4ee5#\u5f00\u5934\u7684\u547d\u4ee4\uff0c\u4fee\u6539\u539f\u59cbC\u7a0b\u5e8f\u3002\u6bd4\u5982hello.c\u4e2d\u7b2c1\u884c\u7684 #include<stdio.h> \u547d\u4ee4\u544a\u8bc9\u9884\u5904\u7406\u5668\u8bfb\u53d6\u7cfb\u7edf\u5934\u6587\u4ef6 stdio.h \u7684\u5185\u5bb9\uff0c\u5e76\u628a\u5b83\u76f4\u63a5\u63d2\u5165\u7a0b\u5e8f\u6587\u672c\u4e2d\u3002\u7ed3\u679c\u5c31\u5f97\u5230\u4e86\u53e6\u4e00\u4e2aC\u7a0b\u5e8f\uff0c\u901a\u5e38\u4ee5 .i \u4f5c\u4e3a\u6587\u4ef6\u6269\u5c55\u540d\u3002 gcc -E helloworld.c -o helloworld.i","title":"\u9884\u5904\u7406\u9636\u6bb5"},{"location":"csapp/#_6","text":"\u7f16\u8bd1\u5668(ccl)\u5c06\u6587\u672c\u6587\u4ef6 helloworld.i \u7ffb\u8bd1\u6210\u6587\u672c\u6587\u4ef6 helloworld.s \uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u6c47\u7f16\u8bed\u8a00\u7a0b\u5e8f\u3002\u8be5\u7a0b\u5e8f\u5305\u542b\u51fd\u6570main\u7684\u5b9a\u4e49\uff0c\u5176\u4e2d\u7684\u6bcf\u4e00\u6761\u8bed\u53e5\u90fd\u4ee5\u4e00\u79cd\u6587\u672c\u683c\u5f0f\u63cf\u8ff0\u4e86\u4e00\u6761\u4f4e\u7ea7\u673a\u5668\u8bed\u8a00\u6307\u4ee4\u3002\u6c47\u7f16\u8bed\u8a00\u4e3a\u4e0d\u540c\u9ad8\u7ea7\u8bed\u8a00\u7684\u4e0d\u540c\u6c47\u7f16\u5668\u63d0\u4f9b\u4e86\u901a\u7528\u7684\u8f93\u51fa\u8bed\u8a00\u3002\u4f8b\u5982C\u7f16\u8bd1\u5668\u548cFortran\u7f16\u8bd1\u5668\u4ea7\u751f\u7684\u8f93\u51fa\u6587\u4ef6\u7528\u7684\u90fd\u662f\u4e00\u6837\u7684\u6c47\u7f16\u8bed\u8a00\u3002 gcc -S helloworld.i -o helloworld.s","title":"\u7f16\u8bd1\u9636\u6bb5"},{"location":"csapp/#_7","text":"\u6c47\u7f16\u5668(as)\u5c06 helloworld.s \u7ffb\u8bd1\u6210\u673a\u5668\u8bed\u8a00\u6307\u4ee4\uff0c\u628a\u8fd9\u4e9b\u6307\u4ee4\u6253\u5305\u6210\u4e00\u79cd\u53eb\u505a \u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u7a0b\u5e8f(relocatable object program) \u7684\u683c\u5f0f\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5728\u76ee\u6807\u6587\u4ef6 helloworld.o \u4e2d\u3002 helloworld.o \u6587\u4ef6\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u768417\u4e2a\u5b57\u8282\u662f\u51fd\u6570 main \u7684\u6307\u4ee4\u7f16\u7801\u3002 gcc -c helloworld.s -o helloworld.o","title":"\u6c47\u7f16\u9636\u6bb5"},{"location":"csapp/#_8","text":"helloworld.c \u7a0b\u5e8f\u4e2d\u8c03\u7528\u4e86 printf \u51fd\u6570\uff0c\u5b83\u662fC\u7f16\u8bd1\u5668\u63d0\u4f9b\u7684\u6807\u51c6C\u5e93\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\u3002 printf \u51fd\u6570\u5b58\u5728\u4e8e\u4e00\u4e2a\u540d\u4e3a printf.o \u7684\u5355\u72ec\u7684\u9884\u7f16\u8bd1\u597d\u4e86\u7684\u76ee\u6807\u6587\u4ef6\u4e2d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u9700\u8981\u7528\u67d0\u79cd\u65b9\u5f0f\u5408\u5e76\u5230\u6211\u4eec\u7684 helloworld.o \u7a0b\u5e8f\u4e2d\u3002\u94fe\u63a5\u5668(ld)\u5c31\u662f\u8d1f\u8d23\u5904\u7406\u8fd9\u79cd\u5408\u5e76\uff0c\u6700\u540e\u4f1a\u5f97\u5230hello\u53ef\u6267\u884c\u6587\u4ef6\u3002 gcc helloworld.o -o helloworld GUN\u9879\u76ee\u7ec4\u6210 Linux\u5185\u6838 Emacs\u7f16\u8f91\u5668 Gcc\u7f16\u8bd1\u5668 Gdb\u8c03\u8bd5\u5668 \u6c47\u7f16\u5668 \u94fe\u63a5\u5668 \u5904\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5de5\u5177\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u90e8\u4ef6","title":"\u94fe\u63a5\u9636\u6bb5"},{"location":"csapp/#_9","text":"\u4f18\u5316\u7a0b\u5e8f\u6027\u80fd \u7406\u89e3\u94fe\u63a5\u65f6\u51fa\u73b0\u7684\u9519\u8bef \u907f\u514d\u5b89\u5168\u6f0f\u6d1e","title":"\u4e86\u89e3\u7f16\u8bd1\u7cfb\u7edf\u5982\u4f55\u5de5\u4f5c\u6709\u4f55\u76ca\u5904"},{"location":"csapp/#_10","text":"","title":"\u5904\u7406\u5668\u8bfb\u5e76\u89e3\u91ca\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u7684\u6307\u4ee4"},{"location":"csapp/#shell","text":"\u547d\u4ee4\u884c\u89e3\u91ca\u5668\uff0c\u8f93\u51fa\u4e00\u4e2a\u5b57\u7b26\uff0c\u7b49\u5f85\u8f93\u5165\u4e00\u4e2a\u547d\u4ee4\u884c\uff0c\u7136\u540e\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4 \u5982\u679c\u8f93\u5165\u547d\u4ee4\u884c\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u4e0d\u662f\u4e00\u4e2a\u5185\u7f6e\u7684shell\u547d\u4ee4\uff0c\u90a3\u4e48shell\u5c31\u4f1a\u5047\u8bbe\u8fd9\u4e2a\u662f\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u4f1a\u52a0\u8f7d\u5e76\u8fd0\u884c\u8fd9\u4e2a\u6587\u4ef6","title":"Shell\u662f\u4ec0\u4e48\uff1f"},{"location":"csapp/#_11","text":"\u603b\u7ebf \u8d2f\u7a7f\u6574\u4e2a\u7cfb\u7edf\u7684\u4e00\u7ec4\u7535\u5b50\u7ba1\u9053\uff0c\u5b83\u643a\u5e26\u4fe1\u606f\u5b57\u8282\u5e76\u8d1f\u8d23\u5728\u5404\u4e2a\u90e8\u4ef6\u4e4b\u95f4\u4f20\u9012\u3002\u901a\u5e38\u603b\u7ebf\u4e2d\u4f20\u8f93\u7684\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\u5b57\u8282\u5757\uff0c\u4e5f\u5c31\u662f\u5b57\uff08word\uff09\u3002\u5b57\u4e2d\u7684\u5b57\u8282\u6570\uff08\u5b57\u957f\uff09\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u7cfb\u7edf\u53c2\u6570\u3002\u4e0d\u540c\u7cfb\u7edf\u5b57\u957f\u4e0d\u540c\u3002\u6bd4\u598232\u4f4d\u7cfb\u7edf\u7684\u5b57\u957f\u4e3a4\u4e2a\u5b57\u8282\uff0c64\u4f4d\u7cfb\u7edf\u7684\u5b57\u957f\u4e3a8\u4e2a\u5b57\u8282\u3002 I/O\u8bbe\u5907 \u7cfb\u7edf\u548c\u5916\u90e8\u4e16\u754c\u7684\u8054\u7cfb\u901a\u9053\uff0c\u5305\u62ec\u7528\u6237\u8f93\u5165\u7684\u952e\u76d8\u548c\u9f20\u6807\uff0c\u7528\u6237\u8f93\u51fa\u7684\u663e\u793a\u5668\uff0c\u957f\u671f\u5b58\u50a8\u6570\u636e\u548c\u7a0b\u5e8f\u7684\u78c1\u76d8\u9a71\u52a8\u5668\u3002I/O\u8bbe\u5907\u9700\u8981\u63a7\u5236\u5668\u6216\u9002\u914d\u5668\u548cI/O\u603b\u7ebf\u76f8\u4e92\u8fde\u63a5\u3002 \u63a7\u5236\u5668\u662fI/O\u8bbe\u5907\u672c\u8eab\u6216\u8005\u7cfb\u7edf\u7684\u4e3b\u5370\u5237\u7535\u8def\u677f\u4e0a\u7684\u82af\u7247\u7ec4 \u9002\u914d\u5668\u662f\u4e00\u5757\u63d2\u5728\u4e3b\u677f\u63d2\u69fd\u4e0a\u7684\u5361 \u63a7\u5236\u5668\u548c\u9002\u914d\u5668\u7684\u529f\u80fd\u90fd\u662f\u5728I/O\u603b\u7ebf\u548cI/O\u8bbe\u5907\u4e4b\u95f4\u4f20\u9012\u4fe1\u606f \u4e3b\u5b58 \u4e34\u65f6\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u5904\u7406\u5668\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\uff0c\u7528\u6765\u5b58\u653e\u7a0b\u5e8f\u548c\u7a0b\u5e8f\u5904\u7406\u7684\u6570\u636e \u7269\u7406\u4e0a\u7531\u52a8\u6001\u968f\u673a\u5b58\u53d6\u5b58\u50a8\u5668(DRAM)\u82af\u7247\u7ec4\u6210 \u903b\u8f91\u4e0a\u662f\u7ebf\u6027\u5b57\u8282\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5b57\u8282\u90fd\u6709\u552f\u4e00\u7684\u5730\u5740(\u6570\u7ec4\u7d22\u5f15)\uff0c\u5730\u5740\u4ece\u96f6\u5f00\u59cb\u3002 \u5904\u7406\u5668 \u89e3\u91ca\u6216\u8005\u6267\u884c\u5b58\u50a8\u5728\u4e3b\u5b58\u4e2d\u6307\u4ee4\u7684\u5f15\u64ce\uff0c\u6838\u5fc3\u662f\u5927\u5c0f\u4e3a\u4e00\u4e2a\u5b57\u7684\u5b58\u50a8\u8bbe\u5907(\u5bc4\u5b58\u5668)\uff0c\u6210\u4e3a\u7a0b\u5e8f\u8ba1\u6570\u5668(PC)\uff0c\u4efb\u4f55\u65f6\u523b\uff0cPC\u5747\u6307\u5411\u4e3b\u5b58\u4e2d\u7684\u67d0\u6761\u673a\u5668\u8bed\u8a00\u6307\u4ee4 \u5904\u7406\u5668\u4ece\u7cfb\u7edf\u901a\u7535\u5f00\u59cb\u4e00\u76f4\u4e0d\u65ad\u6267\u884c\u7a0b\u5e8f\u8ba1\u6570\u5668\u6307\u5411\u7684\u6307\u4ee4\uff0c\u518d\u66f4\u65b0\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c\u6307\u5411\u4e0b\u4e00\u6761\u6307\u4ee4\u3002\u770b\u4e0a\u53bb\u662f\u4e00\u4e2a\u6307\u4ee4\u6267\u884c\u6a21\u578b\u64cd\u4f5c\u7684\uff0c\u6a21\u578b\u7531 \u6307\u4ee4\u96c6\u67b6\u6784 \u51b3\u5b9a \u5904\u7406\u5668\u56f4\u7ed5\u4e3b\u5b58\u3001\u5bc4\u5b58\u5668\u4ee5\u53ca\u7b97\u672f/\u903b\u8f91\u5355\u5143(ALU)\u8fdb\u884c \u52a0\u8f7d\uff1a\u4ece\u4e3b\u5b58\u590d\u5236\u4e00\u4e2a\u5b57\u8282\u6216\u8005\u4e00\u4e2a\u5b57\u5230\u5bc4\u5b58\u5668\uff0c\u8986\u76d6\u5bc4\u5b58\u5668\u539f\u6765\u7684\u5185\u5bb9 \u5b58\u50a8\uff1a\u4ece\u5bc4\u5b58\u5668\u590d\u5236\u4e00\u4e2a\u5b57\u8282\u6216\u8005\u4e00\u4e2a\u5b57\u5230\u4e3b\u5b58\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u8986\u76d6\u8fd9\u4e2a\u4f4d\u7f6e\u539f\u6765\u7684\u5185\u5bb9 \u64cd\u4f5c\uff1a\u628a\u4e24\u4e2a\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u590d\u5236\u5230ALU\uff0c\u7136\u540eALU\u4f1a\u5bf9\u4e24\u4e2a\u5b57\u505a\u7b97\u672f\u8fd0\u7b97\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u653e\u5230\u4e00\u4e2a\u5bc4\u5b58\u5668\u4e2d\uff0c\u8986\u76d6\u8be5\u5bc4\u5b58\u5668\u4e2d\u539f\u6765\u7684\u5185\u5bb9 \u8df3\u8f6c\uff1a\u4ece\u6307\u4ee4\u672c\u8eab\u4e2d\u62bd\u53d6\u4e00\u4e2a\u5b57\uff0c\u5e76\u5c06\u8fd9\u4e2a\u5b57\u590d\u5236\u5230\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c\u8986\u76d6PC\u4e2d\u539f\u6765\u7684\u503c","title":"\u7cfb\u7edf\u7684\u786c\u4ef6\u7ec4\u6210"},{"location":"csapp/#hello","text":"","title":"\u8fd0\u884chello\u7a0b\u5e8f"},{"location":"csapp/#shellhello","text":"shell\u8bfb\u53d6\u6211\u4eec\u4ece\u952e\u76d8\u4e0a\u8f93\u5165\u7684\u5b57\u7b26\u4e32 ./hello \u4e4b\u540e\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u4fe1\u606f\u6d41\u5982\u4e0b\u56fe\u7ea2\u7ebf\u6240\u793a shell\u7a0b\u5e8f\u9700\u8981\u628a\u7528\u6237\u8f93\u5165\u7684\u5185\u5bb9\u4f5c\u4e3a\u4e00\u4e2a\u53d8\u91cf\u4f7f\u7528\uff0c\u8fd9\u4e2a\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u4e00\u5b9a\u4f1a\u6709\u4e2a\u5730\u5740\uff0c\u56e0\u6b64\u5b83\u6700\u7ec8\u4f1a\u8fbe\u5230\u4e3b\u5b58\uff0c\u4fe1\u606f\u6d41\u5982\u4e0b \u952e\u76d8 -> USB\u63a7\u5236\u5668 -> I/O\u603b\u7ebf -> I/O\u6865 -> \u7cfb\u7edf\u603b\u7ebf -> \u5bc4\u5b58\u5668 -> \u7cfb\u7edf\u603b\u7ebf -> I/O\u6865 -> \u5185\u5b58\u603b\u7ebf -> \u4e3b\u5b58","title":"shell\u8bfb\u53d6hello\u5b57\u7b26\u4e32"},{"location":"csapp/#hello_1","text":"\u5728\u952e\u76d8\u6572\u51fb\u56de\u8f66\u952e\uff0cshell\u7a0b\u5e8f\u77e5\u9053\u6211\u4eec\u7ed3\u675f\u4e86\u547d\u4ee4\u7684\u8f93\u5165\uff0cshell\u4f1a\u6267\u884c\u4e00\u7cfb\u5217\u7684\u6307\u4ee4\u6765\u52a0\u8f7d\u53ef\u6267\u884c\u7684hello\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6307\u4ee4\u4f1a\u5c06hello\u76ee\u6807\u6587\u4ef6\u4e2d\u7684 \u4ee3\u7801\u548c\u6570\u636e\u4ece\u78c1\u76d8\u590d\u5236\u5230\u4e3b\u5b58 ,\u6570\u636e\u5305\u62ec\u6700\u7ec8\u4f1a\u88ab\u8f93\u51fa\u7684\u5b57\u7b26\u4e32 hello world ,\u4fe1\u606f\u6d41\u5982\u4e0b \u78c1\u76d8 -> \u78c1\u76d8\u63a7\u5236\u5668 -> I/O\u603b\u7ebf -> I/O\u6865 -> \u5185\u5b58\u603b\u7ebf -> \u4e3b\u5b58 \u8fd9\u79cd\u8bbf\u95ee\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u6570\u636e\u4e0d\u4f1a\u7ecf\u8fc7CPU\uff0c\u800c\u662f\u76f4\u63a5\u4ece\u78c1\u76d8\u5230\u4e3b\u5b58\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3aDMA DMA\u76f4\u63a5\u5b58\u50a8\u5668\u8bbf\u95ee\uff0c\u6709\u5229\u4e8e\u51cf\u8f7bCPU\u8d1f\u8377\uff0c\u4f7f\u5f97CPU\u53ef\u4ee5\u5728\u6570\u636e\u8f6c\u79fb\u7684\u540c\u65f6\u505a\u5176\u4ed6\u4efb\u52a1","title":"\u4e3b\u5b58\u52a0\u8f7dhello\u7a0b\u5e8f"},{"location":"csapp/#hello_2","text":"\u52a0\u8f7d\u5b8chello\u6587\u4ef6\u540e\uff0cCPU\u4ecehello\u7a0b\u5e8f\u7684\u4e3b\u51fd\u6570\u5904\u6267\u884c\u6307\u4ee4\uff0c\u8fd9\u4e9b\u6307\u4ee4\u5c06 hello world\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u8282\u4ece\u4e3b\u5b58\u590d\u5236\u5230\u5bc4\u5b58\u5668\u6587\u4ef6\uff0c\u518d\u4ece\u5bc4\u5b58\u5668\u6587\u4ef6\u4e2d\u590d\u5236\u5230\u663e\u793a\u8bbe\u5907 ,\u6700\u7ec8\u4f1a\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\uff0c\u4fe1\u606f\u6d41\u5982\u4e0b \u4e3b\u5b58 -> \u5bc4\u5b58\u5668 -> \u7cfb\u7edf\u603b\u7ebf -> I/O\u6865 -> I/O\u603b\u7ebf -> \u56fe\u5f62\u9002\u914d\u5668 -> \u663e\u793a\u5668","title":"\u663e\u793ahello\u7a0b\u5e8f\u6267\u884c\u7ed3\u679c"},{"location":"csapp/#_12","text":"\u4e0a\u9762\u8fd0\u884c\u7684hello\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u770b\u5230\u6307\u4ee4\u548c\u6570\u636e\u9700\u8981\u591a\u6b21\u5728\u5bc4\u5b58\u5668\u3001\u4e3b\u5b58\u3001\u78c1\u76d8\u4e4b\u95f4\u6765\u56de\u590d\u5236\uff0c\u8fd9\u4e9b\u590d\u5236\u5c31\u662f\u5f00\u9500\uff0c\u51cf\u6162\u4e86\u7a0b\u5e8f\u7684\u5de5\u4f5c\u901f\u5ea6\uff0c\u4f7f\u7528 \u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668 \u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898 L1\u9ad8\u901f\u7f13\u5b58\u7684\u5bb9\u91cf\u53ef\u4ee5\u8fbe\u5230 \u6570\u4e07\u5b57\u8282 ,\u8bbf\u95ee\u901f\u5ea6\u51e0\u4e4e\u548c\u8bbf\u95ee\u5bc4\u5b58\u5668\u6587\u4ef6\u4e00\u6837\u5feb L2\u9ad8\u901f\u7f13\u5b58\u5bb9\u91cf\u4e3a \u6570\u5341\u4e07\u5230\u6570\u767e\u4e07\u5b57\u8282 ,\u901a\u8fc7\u4e00\u6761\u7279\u6b8a\u7684\u603b\u7ebf\u8fde\u63a5\u5230\u5904\u7406\u5668\uff0c\u8fdb\u7a0b\u8bbf\u95eeL2\u9ad8\u901f\u7f13\u5b58\u7684\u65f6\u95f4\u8981\u6bd4\u8bbf\u95eeL1\u9ad8\u901f\u7f13\u5b58\u7684\u65f6\u95f4\u957f5\u500d\uff0c\u4f46\u662f\u4ecd\u7136\u6bd4\u8bbf\u95ee\u4e3b\u5b58\u7684\u65f6\u95f4\u5feb5\uff5e10\u500d L1\u548cL2\u9ad8\u901f\u7f13\u5b58\u662f\u7528\u4e00\u79cd\u53eb\u505a \u9759\u6001\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668(SRAM) \u7684\u786c\u4ef6\u6280\u672f\u5b9e\u73b0\u7684 \u9ad8\u901f\u7f13\u5b58\u5c40\u90e8\u6027\u539f\u7406\uff1a \u7a0b\u5e8f\u5177\u6709\u8bbf\u95ee\u5c40\u90e8\u533a\u57df\u4e2d\u7684\u6570\u636e\u548c\u4ee3\u7801\u7684\u8d8b\u52bf\uff0c\u56e0\u6b64\u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668\u4f5c\u4e3a\u6682\u65f6\u7684\u96c6\u7ed3\u533a\u57df\uff0c\u5b58\u653e\u5904\u7406\u5668\u8fd1\u671f\u53ef\u80fd\u4f1a\u9700\u8981\u7684\u4fe1\u606f","title":"\u9ad8\u901f\u7f13\u5b58"},{"location":"csapp/#_13","text":"\u81f3\u4e0a\u800c\u4e0b\uff0c\u8bbe\u5907\u7684\u8bbf\u95ee\u901f\u5ea6\u8d8a\u6765\u8d8a\u6162\u3001\u5bb9\u91cf\u8d8a\u6765\u8d8a\u5927\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5b57\u8282\u7684\u9020\u4ef7\u4e5f\u8d8a\u6765\u8d8a\u4fbf\u5b9c\u3002\u5bc4\u5b58\u5668\u6587\u4ef6\u5728\u5c42\u6b21\u7ed3\u6784\u4e2d\u4f4d\u4e8e\u6700\u9876\u90e8\uff0c\u4e5f\u5c31\u662f\u7b2c0\u7ea7\u6216\u8bb0\u4e3aL0 \u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784\u7684\u4e3b\u8981\u601d\u60f3\u662f\u4e0a\u4e00\u5c42\u7684\u5b58\u50a8\u5668\u4f5c\u4e3a\u4f4e\u4e00\u5c42\u5b58\u50a8\u5668\u7684\u9ad8\u901f\u7f13\u5b58\u3002\u56e0\u6b64\uff0c\u5bc4\u5b58\u5668\u6587\u4ef6\u5c31\u662fL1\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL1\u662fL2\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL2\u662fL3\u7684\u9ad8\u901f\u7f13\u5b58\uff0cL3\u662f\u4e3b\u5b58\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u800c\u4e3b\u5b58\u53c8\u662f\u78c1\u76d8\u7684\u9ad8\u901f\u7f13\u5b58\u3002 \u67d0\u4e9b\u5177\u6709\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u7684\u7f51\u7edc\u7cfb\u7edf\u4e2d\uff0c\u672c\u5730\u78c1\u76d8\u5c31\u662f\u5b58\u50a8\u5728\u5176\u4ed6\u7cfb\u7edf\u4e2d\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u7684\u9ad8\u901f\u7f13\u5b58","title":"\u5b58\u50a8\u8bbe\u5907\u7684\u5c42\u6b21\u7ed3\u6784"},{"location":"csapp/#_14","text":"\u64cd\u4f5c\u7cfb\u7edf\u662f\u5e94\u7528\u7a0b\u5e8f\u548c\u786c\u4ef6\u4e4b\u95f4\u63d2\u5165\u7684\u4e00\u5c42\u8f6f\u4ef6\u3002\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u5bf9\u786c\u4ef6\u7684\u64cd\u4f5c\u5c1d\u8bd5\u90fd\u5fc5\u987b\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u3002 \u64cd\u4f5c\u7cfb\u7edf\u7684\u4e24\u4e2a\u57fa\u672c\u529f\u80fd \u9632\u6b62\u786c\u4ef6\u88ab\u5931\u63a7\u7684\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528 \u5411\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7b80\u5355\u4e00\u81f4\u7684\u673a\u5236\u6765\u63a7\u5236\u590d\u6742\u800c\u53c8\u901a\u5e38\u5927\u4e0d\u76f8\u540c\u7684\u4f4e\u7ea7\u786c\u4ef6\u8bbe\u5907 \u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u51e0\u4e2a\u57fa\u672c\u7684\u62bd\u8c61\u6982\u5ff5(\u8fdb\u7a0b\u3001\u865a\u62df\u5185\u5b58\u3001\u6587\u4ef6)\u6765\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u529f\u80fd","title":"\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u786c\u4ef6"},{"location":"csapp/#_15","text":"\u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u7a0b\u5e8f\u7684\u4e00\u79cd\u62bd\u8c61,\u4e00\u4e2a\u7cfb\u7edf\u4e0a\u53ef\u4ee5 \u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u8fdb\u7a0b \uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u597d\u50cf\u5728 \u72ec\u5360\u5730\u4f7f\u7528\u786c\u4ef6 \u3002 \u5e76\u53d1\u8fd0\u884c \u662f\u8bf4\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6307\u4ee4\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u6307\u4ee4\u662f\u4ea4\u9519\u6267\u884c\u7684 \u4e0a\u4e0b\u6587\uff1a\u64cd\u4f5c\u7cfb\u7edf\u4fdd\u6301\u548c\u8ddf\u8e2a\u8fdb\u7a0b\u8fd0\u884c\u6240\u9700\u7684\u6240\u6709\u72b6\u6001\u4fe1\u606f(PC\u503c\uff0c\u4e3b\u5b58\u7684\u5185\u5bb9\u7b49) \u4e0a\u4e0b\u6587\u5207\u6362\uff1a\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u63a7\u5236\u5904\u7406\u5668\u5728 \u8fdb\u7a0b\u95f4\u5207\u6362 \u4ee5\u8fbe\u5230\u4ea4\u9519\u6267\u884c\u7684\u76ee\u7684 \u4ece\u4e00\u4e2a\u8fdb\u7a0b\u5230\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f6c\u6362\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7ba1\u7406\u7684\uff0c\u5185\u6838\u662f\u64cd\u4f5c\u7cfb\u7edf\u4ee3\u7801\u5e38\u9a7b\u4e3b\u5b58\u7684\u90e8\u5206\uff0c\u5185\u6838\u4e0d\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\uff0c\u5b83\u662f\u7cfb\u7edf\u7ba1\u7406\u5168\u90e8\u8fdb\u7a0b \u6240\u7528\u4ee3\u7801\u548c\u6570\u636e\u7ed3\u6784\u7684\u96c6\u5408 \u4e00\u4e2a\u8fdb\u7a0b\u662f\u7531\u591a\u4e2a\u79f0\u4e3a\u7ebf\u7a0b\u7684\u6267\u884c\u5355\u5143\u7ec4\u6210\uff0c \u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u8fd0\u884c\u5728\u8fdb\u7a0b\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u5e76\u5171\u4eab\u540c\u6837\u7684\u4ee3\u7801\u548c\u5168\u5c40\u6570\u636e \u3002\u591a\u7ebf\u7a0b\u6bd4\u591a\u8fdb\u7a0b\u66f4\u5bb9\u6613\u5171\u4eab\u6570\u636e\uff0c\u800c\u4e14\u7ebf\u7a0b\u95f4\u5207\u6362\u6240\u6709\u7684\u5f00\u9500\u8fdc\u5c0f\u4e8e\u8fdb\u7a0b\u5207\u6362","title":"\u8fdb\u7a0b&amp;\u7ebf\u7a0b"},{"location":"csapp/#_16","text":"\u865a\u62df\u5185\u5b58\u662f\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u4e3a\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5047\u8c61\uff0c \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u5728\u72ec\u5360\u5730\u4f7f\u7528\u4e3b\u5b58 \u3002\u6bcf\u4e2a\u8fdb\u7a0b\u770b\u5230\u7684\u5185\u5b58\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u79f0\u4e3a \u865a\u62df\u5730\u5740\u7a7a\u95f4 \u865a\u62df\u5730\u5740\u7a7a\u95f4\u5206\u4e3a\u4e86\u82e5\u5e72\u4e2a\u90e8\u5206\uff0c\u5e76\u7528 \u7bad\u5934\u8868\u793a\u8be5\u90e8\u5206\u7684\u6269\u5c55\u65b9\u5411 \uff0c\u6700\u4e0b\u7aef\u5730\u5740\u4e3a0\uff0c\u5411\u4e0a\u5730\u5740\u9010\u6e10\u589e\u957f\uff0c\u6bcf\u4e2a\u90e8\u5206\u7684\u4f5c\u7528\u5982\u4e0b\uff1a \u7a0b\u5e8f\u4ee3\u7801\u548c\u6570\u636e\uff1a\u5b58\u653e\u53ef\u6267\u884c\u7a0b\u5e8f\u4ee3\u7801\u548c\u4ee3\u7801\u4e2d\u7684\u5168\u5c40\u53d8\u91cf \u5806\uff1a\u4ee3\u7801\u548c\u6570\u636e\u533a\u540e\u7d27\u968f\u7740\u7684\u662f\u8fd0\u884c\u65f6\u5806\uff0c\u7528\u4e8e\u52a8\u6001\u7533\u8bf7\u7684\u5185\u5b58\u53d8\u91cf\uff0c\u6bd4\u5982malloc\u51fd\u6570\u7533\u8bf7\u7684\u52a8\u6001\u5185\u5b58\u7a7a\u95f4\uff0c\u53ef\u4ee5\u5411\u4e0a\u6269\u5c55 \u5171\u4eab\u5e93\uff1a\u7528\u4e8e\u5b58\u653eC\u8bed\u8a00\u5e93\u51fd\u6570\u7684\u4ee3\u7801\u548c\u6570\u636e\u3002\u672c\u4f8b\u4e2d\u5373printf\u7684\u4ee3\u7801\u548c\u6570\u636e \u6808\uff1a\u4f4d\u4e8e\u865a\u62df\u5730\u5740\u7a7a\u95f4\u7684\u9876\u90e8\uff0c\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u3001\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u7b49\u3002\u5f53\u6211\u4eec\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u6808\u4f1a\u5411\u4e0b\u6269\u5c55\uff0c\u8fd4\u56de\u65f6\uff0c\u5411\u4e0a\u6536\u7f29 \u5185\u6838\u865a\u62df\u5185\u5b58\uff1a\u5730\u5740\u7a7a\u95f4\u9876\u90e8\u7684\u533a\u57df\u662f\u4e3a\u5185\u6838\u4fdd\u7559\u7684\u3002\u4e0d\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u8bfb\u5199\u8fd9\u4e2a\u533a\u57df\u7684\u5185\u5bb9\u6216\u8005\u76f4\u63a5\u8c03\u7528\u5185\u6838\u4ee3\u7801\u5b9a\u4e49\u7684\u51fd\u6570\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u5fc5\u987b\u8c03\u7528\u5185\u6838\u6765\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002\u5bf9\u4e8e\u4e00\u4e2a64\u4f4d\u7684\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\uff0c\u7528\u6237\u7a7a\u95f4\u4e3a0-3G,\u5185\u6838\u7a7a\u95f4\u4e3a3G-4G","title":"\u865a\u62df\u5185\u5b58"},{"location":"csapp/#_17","text":"\u6587\u4ef6\u5b9e\u8d28\u4e0a\u662f\u5b57\u8282\u5e8f\u5217\uff0c\u8ba1\u7b97\u673a\u4e0a\u7684I/O\u8bbe\u5907\uff0c\u5305\u62ec\u78c1\u76d8\u3001\u952e\u76d8\u3001\u663e\u793a\u5668\u3001\u7f51\u7edc\u7b49\u90fd\u53ef\u4ee5\u770b\u6210\u6587\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u5c06\u6240\u6709\u7684I/O\u8bbe\u5907\u770b\u6210\u662f\u6587\u4ef6\uff0c\u6587\u4ef6\u662f\u5b57\u8282\u5e8f\u5217\uff0c\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u8f93\u5165\u8f93\u51fa\u53ef\u4ee5\u8c03\u7528\u7cfb\u7edf\u51fd\u6570( Unix I/O\u7cfb\u7edf\u51fd\u6570\u8c03\u7528\u8bfb\u5199\u6587\u4ef6 )\u6765\u8bfb\u5199\u6587\u4ef6\u5b9e\u73b0\u6765\u5b9e\u73b0\u7684","title":"\u6587\u4ef6"},{"location":"csapp/#_18","text":"\u4ece\u4e00\u4e2a\u5355\u72ec\u7684\u7cfb\u7edf\u6765\u770b\uff0c\u7f51\u7edc\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2aI/O\u8bbe\u5907 \u5f53\u64cd\u4f5c\u7cfb\u7edf\u4ece\u4e3b\u5b58\u590d\u5236\u4e00\u4e32\u5b57\u8282\u5230 \u7f51\u7edc\u9002\u914d\u5668 \u65f6\uff0c\u8ba1\u7b97\u673a\u4f1a\u81ea\u52a8\u5c06\u5176\u53d1\u9001\u5230\u53e6\u4e00\u53f0\u673a\u5668","title":"\u7f51\u7edc"},{"location":"csapp/#_19","text":"\u5e76\u53d1Concurrency\uff1a\u5355\u6838CPU\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u6761\u6307\u4ee4\u6267\u884c\uff0c\u4f46\u5f88\u591a\u4e2a\u8fdb\u7a0b\u6307\u4ee4\u88ab\u5feb\u901f\u8f6e\u6362\u6267\u884c\uff0c\u4f7f\u5f97\u5b8f\u89c2\u4e0a\u5177\u6709\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u6267\u884c\u7684\u6548\u679c\u3002\u4f46\u662f\u5fae\u89c2\u4e0a\u5e76\u4e0d\u662f\u540c\u65f6\u6267\u884c\u7684\uff0c\u53ea\u662f\u5728\u4e00\u5b9a\u7684\u65f6\u95f4\u7247\u91cc\uff0c\u5feb\u901f\u4ea4\u66ff\u6267\u884c\u591a\u4e2a\u8fdb\u7a0b \u5e76\u884cParallelism\uff1a\u540c\u4e00\u65f6\u523b\uff0c\u6709\u591a\u6761\u6307\u4ee4\u5728\u591a\u4e2a\u5904\u7406\u5668\u4e0a\u540c\u65f6\u6267\u884c\u3002\u82e5\u7cfb\u7edf\u5185\u53ea\u6709\u4e00\u4e2a CPU\uff0c\u5bf9\u4e8e\u591a\u7ebf\u7a0b\u4efb\u52a1\uff0c\u8fd9\u4e9b\u4efb\u52a1\u4e0d\u53ef\u80fd\u771f\u5b9e\u5e76\u884c\u7684\uff0c\u56e0\u4e3a\u4e00\u4e2a CPU \u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u591a\u7ebf\u7a0b\u6216\u8005\u591a\u7ebf\u7a0b\u4efb\u52a1\u5c31\u662f\u5e76\u53d1\u7684\uff0c\u800c\u4e0d\u662f\u5e76\u884c\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u505c\u5730\u5207\u6362\u4efb\u52a1\u3002\u771f\u6b63\u7684\u5e76\u53d1\u4e5f\u53ea\u80fd\u591f\u51fa\u73b0\u5728\u62e5\u6709\u591a\u4e2a CPU \u7684\u7cfb\u7edf\u4e2d\uff08\u591a\u6838CPU\uff09","title":"\u5e76\u53d1\u548c\u5e76\u884c"},{"location":"csapp/#_20","text":"\u5355CPU\u7cfb\u7edf \u5355CPU\u7cfb\u7edf\u4e2d\uff0c\u901a\u8fc7\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5e76\u53d1\u53ef\u4ee5\u8bbe\u8ba1\u51fa\u591a\u4e2a\u7a0b\u5e8f\u6267\u884c\u7684\u7cfb\u7edf \u901a\u8fc7\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5e76\u53d1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u6267\u884c\u591a\u4e2a\u63a7\u5236\u6d41 \u591aCPU\u7cfb\u7edf(\u8d85\u7ebf\u7a0b+\u591a\u6838CPU) \u591a\u6838CPU \u8d85\u7ebf\u7a0b \u540c\u65f6\u591a\u7ebf\u7a0b\uff0c\u5141\u8bb8\u4e00\u4e2aCPU\u6267\u884c\u591a\u4e2a\u63a7\u5236\u6d41\u7684\u6280\u672f Intel Core i7 cpu\u53ef\u4ee5\u8ba9\u6bcf\u4e2a\u6838\u6267\u884c\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4e00\u4e2a4\u6838\u7684\u7cfb\u7edf\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5e76\u884c\u6267\u884c8\u4e2a\u7ebf\u7a0b","title":"\u7ebf\u7a0b\u7ea7\u5e76\u53d1"},{"location":"csapp/#_21","text":"\u4e00\u4e2a\u6307\u4ee4\u7684\u6267\u884c\u8fc7\u7a0b\u901a\u5e38\u5305\u62ec\u5982\u4e0b\u4e09\u4e2a\u9636\u6bb5\uff1a \u53d6\u6307\u4ee4\u9636\u6bb5 \u89e3\u7801\u9636\u6bb5 \u6267\u884c\u6307\u4ee4\u9636\u6bb5 \u6700\u521d\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u662f\u6bcf\u4e2a\u6307\u4ee4\u7ecf\u8fc7\u4e00\u6574\u4e2a\u8fc7\u7a0b\u540e\uff0c\u624d\u8fd0\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 \u5b9e\u9645\u4e0a\u6bcf\u4e2a\u9636\u6bb5\u4f7f\u7528\u7684\u662f\u5904\u7406\u5668\u4e2d\u7684\u4e0d\u540c\u786c\u4ef6\u90e8\u5206\uff0c\u8fd9\u6837\u5b50\u53ef\u4ee5\u6d41\u6c34\u7ebf\u7684\u8fd0\u884c\u591a\u6761\u6307\u4ee4\uff0c\u8fbe\u5230\u5dee\u4e0d\u591a\u4e00\u4e2a\u59cb\u7ec8\u5468\u671f\u8fd0\u884c\u4e00\u6761\u6307\u4ee4 CPU\u987a\u5e8f\u5904\u7406\u6307\u4ee4 CPU\u5e76\u884c\u5904\u7406\u6307\u4ee4 \u8d85\u6807\u91cf\u5904\u7406\u5668:\u5904\u7406\u5668\u53ef\u4ee5\u8fbe\u5230\u6bd4\u4e00\u4e2a\u5468\u671f\u4e00\u6761\u6307\u4ee4\u66f4\u5feb\u7684\u6267\u884c\u901f\u7387","title":"\u6307\u4ee4\u7ea7\u5e76\u53d1"},{"location":"csapp/#_22","text":"\u5f88\u591a\u73b0\u4ee3\u5904\u7406\u5668\u62e5\u6709\u7279\u6b8a\u7684\u786c\u4ef6\uff0c\u5141\u8bb8\u4e00\u6761\u6307\u4ee4\u4ea7\u751f\u591a\u4e2a\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e4b\u4e3a\u5355\u6307\u4ee4\u3001\u591a\u6570\u636e\uff0c\u5373 SIMD\u5e76\u884c","title":"\u5355\u6307\u4ee4\u3001\u591a\u6570\u636e\u5e76\u884c"},{"location":"csapp/#amdahl","text":"Amdahl\u5b9a\u5f8b\u662f\u5bf9\u63d0\u5347\u7cfb\u7edf\u67d0\u4e00\u90e8\u5206\u6027\u80fd\u6240\u5e26\u6765\u7684\u6548\u679c\u8fdb\u884c\u91cf\u5316\uff1a\u5f53\u6211\u4eec\u5bf9\u7cfb\u7edf\u67d0\u90e8\u5206\u52a0\u901f\u65f6\uff0c\u5176\u5bf9\u7cfb\u7edf\u6574\u4f53\u6027\u80fd\u7684\u5f71\u54cd\u53d6\u51b3\u4e8e\u8be5\u90e8\u5206\u7684 \u91cd\u8981\u6027 \u548c \u52a0\u901f\u7a0b\u5ea6 \u5047\u8bbe\u67d0\u5e94\u7528\u7a0b\u5e8f\u539f\u59cb\u6267\u884c\u65f6\u95f4T_old, \u67d0\u90e8\u5206\u6240\u9700\u6267\u884c\u65f6\u95f4\u4e0e\u8be5\u65f6\u95f4\u7684\u6bd4\u4f8b\u4e3aa\uff0c\u8be5\u90e8\u5206\u63d0\u5347\u6bd4\u4f8b\u4e3ak\uff0c\u5219\u603b\u6267\u884c\u65f6\u95f4\u4e3a\uff1a T_new = (1-a)T_old + aT_old/k = T_old[(1-a]+a/k] \u52a0\u901f\u6bd4\u4e3a S = 1/[(1-a) + a/k] \u5f53k\u8d8b\u5411\u4e8e\u65e0\u7a77\u65f6\uff0c\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8be5\u90e8\u5206\u52a0\u901f\u5230\u6781\u9650\u65f6\u6240\u80fd\u5f97\u5230\u7684\u52a0\u901f\u6bd4\u4e3a\uff1aS=1/(1-a) \u8be5\u5b9a\u5f8b\u63d0\u4f9b\u4e00\u4e2a\u4e3b\u8981\u89c2\u70b9\uff1a \u8981\u60f3\u663e\u8457\u52a0\u901f\u6574\u4e2a\u7cfb\u7edf\uff0c\u5fc5\u987b\u63d0\u5347\u5168\u7cfb\u7edf\u4e2d\u76f8\u5f53\u5927\u7684\u90e8\u5206\u7684\u901f\u5ea6","title":"Amdahl\u5b9a\u5f8b"},{"location":"csapp/#_23","text":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u7531\u786c\u4ef6\u548c\u7cfb\u7edf\u8f6f\u4ef6\u7ec4\u6210\uff0c\u4ed6\u4eec\u5171\u540c\u534f\u4f5c\u4ee5\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f \u8ba1\u7b97\u673a\u5185\u90e8\u4fe1\u606f\u88ab\u8868\u793a\u6210\u4e00\u7ec4\u7ec4\u7684\u4f4d \u7a0b\u5e8f\u88ab\u7ffb\u8bd1\u6210\u4e0d\u540c\u5f62\u5f0f\uff0c\u5f00\u59cb\u662fASCII\u6587\u672c\uff0c\u7136\u540e\u88ab\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u7ffb\u8bd1\u6210\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 \u5904\u7406\u5668\u8bfb\u53d6\u5e76\u89e3\u91ca\u5b58\u653e\u5728\u4e3b\u5b58\u91cc\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4 \u4e3b\u5b58\u3001I/O\u8bbe\u5907\u548cCPU\u5bc4\u5b58\u5668\u4e4b\u95f4\u590d\u5236\u6570\u636e\uff0c\u7cfb\u7edf\u4e2d\u7684\u5b58\u50a8\u8bbe\u5907\u5212\u5206\u6210\u4e86\u5c42\u6b21\u7ed3\u6784\uff1aCPU\u5bc4\u5b58\u5668\u5728\u9876\u90e8\uff0c\u63a5\u7740\u662f\u591a\u5c42\u7684\u786c\u4ef6\u9ad8\u901f\u7f13\u5b58\u5b58\u50a8\u5668\uff0cDRAM\u4e3b\u5b58\u548c\u78c1\u76d8\u5b58\u50a8\u5668 \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u662f\u5e94\u7528\u7a0b\u5e8f\u548c\u786c\u4ef6\u4e4b\u95f4\u7684\u5a92\u4ecb\uff0c\u63d0\u4f9b\u4e09\u4e2a\u57fa\u672c\u7684\u62bd\u8c61\uff1a1\uff09\u6587\u4ef6\u662f\u5bf9I/O\u8bbe\u5907\u7684\u62bd\u8c61\uff1b2\uff09\u865a\u62df\u5185\u5b58\u662f\u5bf9\u4e3b\u5b58\u548c\u78c1\u76d8\u7684\u62bd\u8c61\uff1b3\uff09\u8fdb\u7a0b\u662f\u5904\u7406\u5668\u3001\u4e3b\u5b58\u548cI/O\u8bbe\u5907\u7684\u62bd\u8c61 \u7f51\u7edc\u63d0\u4f9b\u4e86\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e4b\u95f4\u901a\u4fe1\u7684\u624b\u6bb5\uff0c\u4ece\u7279\u6b8a\u7cfb\u7edf\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7f51\u7edc\u662f\u4e00\u79cdI/O\u8bbe\u5907","title":"\u5c0f\u7ed3"},{"location":"csapp/#_24","text":"","title":"\u4fe1\u606f\u7684\u8868\u793a\u548c\u5904\u7406"},{"location":"csapp/#_25","text":"","title":"\u7a0b\u5e8f\u7684\u673a\u5668\u7ea7\u8868\u793a"},{"location":"csapp/#_26","text":"","title":"\u5904\u7406\u5668\u4f53\u7cfb\u7ed3\u6784"},{"location":"csapp/#_27","text":"","title":"\u4f18\u5316\u7a0b\u5e8f\u6027\u80fd"},{"location":"csapp/#_28","text":"","title":"\u5b58\u50a8\u5668\u5c42\u6b21\u7ed3\u6784"},{"location":"csapp/#_29","text":"","title":"\u94fe\u63a5"},{"location":"csapp/#_30","text":"","title":"\u5f02\u5e38\u63a7\u5236\u6d41"},{"location":"csapp/#_31","text":"","title":"\u865a\u62df\u5185\u5b58"},{"location":"csapp/#io","text":"","title":"\u7cfb\u7edf\u7ea7I/O"},{"location":"csapp/#_32","text":"","title":"\u7f51\u7edc\u7f16\u7a0b"},{"location":"csapp/#_33","text":"","title":"\u5e76\u53d1\u7f16\u7a0b"},{"location":"kubernetes/crd/","text":"\u7f16\u5199Kubernetes CRD\u6269\u5c55Kubernetes API \uf0c1 \u58f0\u660e\u5f0f\u7f16\u7a0b \uf0c1 \u547d\u4ee4\u5f0f\u7f16\u7a0b\uff1a\u8be6\u7ec6\u7684\u547d\u4ee4\u673a\u5668\u600e\u4e48(How)\u53bb\u5904\u7406\u4e00\u4ef6\u4e8b\u60c5\u4ee5\u8fbe\u5230\u4f60\u60f3\u8981\u7684\u7ed3\u679c(What) \u58f0\u660e\u5f0f\u7f16\u7a0b\uff1a\u53ea\u544a\u8bc9\u4f60\u60f3\u8981\u7684\u7ed3\u679c(What)\uff0c\u673a\u5668\u81ea\u5df1\u6478\u7d22\u8fc7\u7a0b(How) \u5728Kubernetes\u4e2d\u4e00\u822c\u4f1a\u7f16\u5199\u5bf9\u5e94API\u5bf9\u8c61\u7684YAML\u6587\u4ef6\u4ea4\u7ed9Kubernetes(\u800c\u4e0d\u662f\u4f7f\u7528\u4e00\u4e9b\u547d\u4ee4\u6765\u76f4\u63a5\u64cd\u4f5cAPI)\uff0c\u5373\u53ea\u9700\u8981\u63d0\u4ea4\u4e00\u4e2a\u5b9a\u4e49\u597d\u7684API\u5bf9\u8c61\u6765\"\u58f0\u660e\"\uff08\u8fd9\u4e2aYAML\u6587\u4ef6\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\"\u58f0\u660e\"),\u8868\u793a\u6240\u671f\u671b\u7684\u6700\u7ec8\u72b6\u6001\u662f\u4ec0\u4e48\u6837\u5b50\u5c31\u53ef\u4ee5\u4e86 \u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u7ec8\u72b6\u6001\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u901a\u8fc7K8s\u6765\u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\uff0c\u901a\u8fc7\u8fd9\u79cd\u58f0\u660e\u5f0f\u7684\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u5e94\u7528\u7684\u914d\u7f6e\u7ba1\u7406\u590d\u6742\u5ea6 GVK&&GVR \uf0c1 \u5728Kubernetes\u4e2d\u60f3\u8981\u5b8c\u6210\u4e00\u4e2aCRD\uff0c\u9700\u8981\u6307\u5b9a group/version \u548c kind , \u5728kuberntes\u7684API Server\u4e2d\u7b80\u79f0\u4e3aGVK\uff0cGVK\u662f\u5b9a\u4f4d\u4e00\u79cd\u7c7b\u578b\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982daemonsets\u5c31\u662fKubernetes\u7684\u4e00\u79cd\u8d44\u6e90\uff0c\u5f53\u6211\u4eec\u60f3\u8981\u901a\u8fc7Kubernetes\u521b\u5efa\u4e00\u4e2adaemonsets\u7684\u65f6\u5019\uff0c\u9700\u8981\u5b9a\u4e49daemonsets\u7684\u63cf\u8ff0\u6587\u4ef6 apiVersion: apps/v1 kind: DaemonSet \u8fd9\u91cc\u58f0\u660e\u4e86apiVersion\u662f apps/v1 ,\u5176\u5b9e\u9690\u542b\u4e86Group\u662fapps\uff0cVersion\u662fv1\uff0cKind\u662f\u5b9a\u4e49\u7684DaemonSet\uff0c\u800ckubectl\u63a5\u6536\u5230\u8fd9\u4e2a\u58f0\u660e\u4ee5\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u58f0\u660e\u53bb\u8c03\u7528API Server\u5bf9\u5e94\u7684URL\u53bb\u83b7\u53d6\u4fe1\u606f\uff0c\u672c\u4f8b\u4e2d\u5c31\u662f /apis/apps/v1/daemonset Kubernetes\u7ec4\u7ec7\u8d44\u6e90\u7684\u65b9\u5f0f\u662f\u4ee5REST\u7684URI\u5f62\u5f0f\u7684\uff0c\u800c\u7ec4\u7ec7\u7684\u8def\u5f84\u5c31\u662f\uff1a \u5728API Server\u4e2d\u8fd8\u6709\u7b2c\u4e8c\u4e2a\u6982\u5ff5GVR, \u5f53\u6211\u4eec\u7406\u89e3\u4e86GVK\u4e4b\u540e\uff0c\u518d\u6765\u7406\u89e3GVR\u5c31\u5bb9\u6613\u4e86\uff0c\u548c\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u7684\u7c7b\u548c\u5bf9\u8c61\u7684\u6982\u5ff5\u662f\u4e00\u6837\u7684 Kubernetes OOP Kind Class Resource Object Kind\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7c7b\uff0c\u7528\u4e8e\u63cf\u8ff0\u5bf9\u8c61\u7684\uff0c\u800cResource\u5c31\u662f\u5177\u4f53\u7684Kind\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u7c7b\u5df2\u7ecf\u5b9e\u4f8b\u5316\u6210\u5bf9\u8c61\u4e86 \u63a7\u5236\u5668\u6a21\u5f0f \uf0c1 kubernetes\u4f5c\u4e3a\u4e00\u4e2a\u201c\u5bb9\u5668\u7f16\u6392\u201d\u5e73\u53f0\uff0c\u5176\u6838\u5fc3\u7684\u529f\u80fd\u662f\u7f16\u6392\uff0cPod\u4f5c\u4e3aK8s\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u5177\u5907\u5f88\u591a\u5c5e\u6027\u548c\u5b57\u6bb5\uff0ck8s\u7f16\u6392\u6b63\u662f\u901a\u8fc7\u4e00\u4e2a\u4e2a\u63a7\u5236\u5668\u6839\u636e\u88ab\u63a7\u5236\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u5b57\u6bb5\u6765\u5b9e\u73b0\u3002 K8s\u96c6\u7fa4\u5728\u90e8\u7f72\u65f6\u5305\u542b\u4e86Controllers\u7ec4\u4ef6\uff0c\u91cc\u9762\u5bf9\u4e8e\u6bcf\u4e2abuild-in\u7684\u8d44\u6e90\u7c7b\u578b\uff08\u6bd4\u5982Deployment\u3001Statefulset\u3001Cronjob\u2026\uff09\u90fd\u6709\u5bf9\u5e94\u7684Controller\uff0c\u57fa\u672c\u662f1:1\u7684\u5173\u7cfb apiVersion: apps/v1 kind: Deployment metadata: name: test spec: selector: matchLabels: app: test replicas: 2 template: metadata: labels: app: test spec: containers: - name: nginx image: nginx:1.7.9 ports: - containerPort: 80 \u5982\u4e0a\uff0cDeployment\u8d44\u6e90\u521b\u5efa\u4ee5\u540e\uff0c\u5bf9\u5e94\u7684Deployment Controller\u786e\u4fdd\u5f53\u524d\u7684deployment\u8d44\u6e90\u7684Pod\u4e2a\u6570\u6c38\u8fdc\u4e3a2\uff0cPod\u7531Template\u90e8\u5206\u7ec4\u6210,\u5177\u4f53\u6765\u8bf4K8s\u91cc\u9762\u7684kube-controller-manager\u8fd9\u4e2a\u7ec4\u4ef6\u5728\u505a\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u5728 kubernetes/pkg/controller \u76ee\u5f55\u4e0b\u5305\u542b\u4e86\u6240\u6709\u7684\u63a7\u5236\u5668\uff0c\u5b83\u4eec\u90fd\u4ee5\u72ec\u6709\u7684\u65b9\u5f0f\u8d1f\u8d23\u67d0\u79cd\u7f16\u6392\u529f\u80fd\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u9075\u5faa\u4e00\u4e2a\u901a\u7528\u7684\u7f16\u6392\u6a21\u5f0f\uff0c\u5373\uff1a\u8c03\u8c10\u5faa\u73af(Reconcile loop),\u4f2a\u4ee3\u7801\u903b\u8f91\u5982\u4e0b: for { actualState := GetResourceActualState(rsvc) expectState := GetResourceExpectState(rsvc) if actualState == expectState { // do nothing } else { Reconcile(rsvc) } } \u5c31\u662f\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u4e0d\u65ad\u5730\u5bf9\u6bd4\u671f\u671b\u72b6\u6001\u548c\u5b9e\u9645\u72b6\u6001\uff0c\u5982\u679c\u6709\u51fa\u5165\u5219\u8fdb\u884cReconcile(\u8c03\u8c10)\u903b\u8f91\u5c06\u5b9e\u9645\u72b6\u6001\u8c03\u6574\u4e3a\u671f\u671b\u72b6\u6001 \u671f\u671b\u72b6\u6001\u5c31\u662f\u6211\u4eec\u5bf9\u8c61\u7684\u5b9a\u4e49(\u901a\u5e38\u662fYAML\u6587\u4ef6),\u5b9e\u9645\u72b6\u6001\u662fk8s\u96c6\u7fa4\u91cc\u9762\u5f53\u524d\u7684\u8fd0\u884c\u72b6\u6001 \u63a7\u5236\u5668\u7684\u7f16\u6392\u903b\u8f91\u4e3b\u8981\u662f\u7b2c\u4e09\u6b65\u505a\u7684\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u79f0\u4e3a\u8c03\u8c10(Reconcile),\u6574\u4e2a\u63a7\u5236\u5668\u7684\u8c03\u8c10\u8fc7\u7a0b\u79f0\u4e3a\"Reconcile Loop\" \u5f00\u53d1\u811a\u624b\u67b6 \uf0c1 code-generator kubebuilder operator-sdk code-generator \u5b9e\u9645\u4e0a\u5e76\u4e0d\u80fd\u79f0\u4e4b\u4e3acrd\u5f00\u53d1\u7684\u811a\u624b\u67b6\uff0c\u5b83\u53ea\u662f\u80fd\u751f\u6210\u4e00\u4e9b\u4ee3\u7801\uff0c\u5982\u679c\u7528code-generator\u8fdb\u884ccrd\u7684\u5f00\u53d1\u9700\u8981\u624b\u5de5\u7f16\u5199\u5f88\u591a\u4ee3\u7801 kubebuilder \u548c operator-sdk \u90fd\u662f\u4e3a\u4e86\u65b9\u4fbf\u521b\u5efa\u548c\u7ba1\u7406operator\u800c\u751f\u7684\u811a\u624b\u67b6\u9879\u76ee, operator-sdk \u5728\u5e95\u5c42\u4f7f\u7528\u4e86 kubebuilder ,\u4e24\u8005\u5728\u521b\u5efaoperator\u9879\u76ee\u65f6\u90fd\u662f\u8c03\u7528 controller-runtime \u63a5\u53e3\uff0c\u5177\u6709\u76f8\u540c\u7684\u9879\u76ee\u5e03\u5c40\u3002 \u9664\u6b64\u4e4b\u5916 operator-sdk \u8fd8\u589e\u52a0\u4e86\u4e00\u4e9b\u7279\u6027\uff0c\u5177\u4f53\u53ef\u4ee5 \u53c2\u8003 \u4e24\u8005\u4e0d\u662f\u7ade\u4e89\u5173\u7cfb, operator-sdk \u76f8\u5f53\u4e8e\u662f kubebuilder+ operator-sdk \u7684\u6587\u6863\u8d28\u91cf\u9ad8\uff0c\u611f\u89c9 operator-sdk \u66f4\u50cf\u662f\u5546\u4e1a\u7248\u672c\u7684kubebuilder,\u5b9e\u9645\u4e0a\u5b83\u4eec\u90fd\u662f\u5f00\u6e90\u7684 Operator SDK Getting Started \uf0c1 \u5b89\u88c5\u4f9d\u8d56 \uf0c1 \u5728\u5f00\u53d1CRD\u4e4b\u524d\uff0c\u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u5de5\u5177\uff0c\u5177\u4f53\u7684\u53ef\u4ee5 \u53c2\u8003 operator-sdk git go docker kubectl \u521b\u5efa\u811a\u624b\u67b6\u5de5\u7a0b \uf0c1 \u276f mkdir mario \u276f cd mario \u276f pwd /Users/qianguodong/Projects/src/github.com/guodongq/mario \u276f operator-sdk init --domain qgd.io --repo github.com/guodongq/mario Writing kustomize manifests for you to edit... Writing scaffold for you to edit... Get controller runtime: $ go get sigs.k8s.io/controller-runtime@v0.10.0 Update dependencies: $ go mod tidy Next: define a resource with: $ operator-sdk create api \u276f tree -L 2 . \u251c\u2500\u2500 Dockerfile \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 PROJECT \u251c\u2500\u2500 config \u2502 \u251c\u2500\u2500 default \u2502 \u251c\u2500\u2500 manager \u2502 \u251c\u2500\u2500 manifests \u2502 \u251c\u2500\u2500 prometheus \u2502 \u251c\u2500\u2500 rbac \u2502 \u2514\u2500\u2500 scorecard \u251c\u2500\u2500 go.mod \u251c\u2500\u2500 go.sum \u251c\u2500\u2500 hack \u2502 \u2514\u2500\u2500 boilerplate.go.txt \u2514\u2500\u2500 main.go 8 directories, 7 files \u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4\u540e\u4f1a\u751f\u6210\u57fa\u672c\u7684\u76ee\u5f55\u7ed3\u6784\uff0c\u5bf9\u5176\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u89e3\u91ca\u5982\u4e0b Dockerfile \u7528\u4e8e\u6784\u5efaDocker\u955c\u50cf Makefile \u7f16\u8bd1\u3001\u6784\u5efa\u3001\u90e8\u7f72operator\u90fd\u4f1a\u7528\u5230\u8be5\u6587\u4ef6 PROJECT \u5de5\u7a0b\u7684\u5143\u6570\u636e\uff0c\u5728\u751f\u6210\u5404\u79cdAPI\u7684\u65f6\u5019\u4f1a\u7528\u5230\u8fd9\u91cc\u9762\u7684\u4fe1\u606f config/default \u57fa\u4e8ekustomize\u5236\u4f5c\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3acontroller\u63d0\u4f9b\u6807\u51c6\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u53bb\u4fee\u6539\u8c03\u6574 config/manager \u548ccontroller\u6709\u5173\u7684\u7ec6\u8282\u914d\u7f6e\uff0c\u4f8b\u5982\u955c\u50cf\u7684\u8d44\u6e90\u9650\u5236 config/manifests \u57fa\u4e8ekustomize\u65b9\u5f0f\u7ba1\u7406operator\u751f\u6210\u7684\u6240\u6709manifest config/rbac operator\u5728kubernetes\u4e2d\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u901a\u8fc7rbac\u505a\u7cbe\u7ec6\u7684\u6743\u9650\u914d\u7f6e config/scorecard \u5de5\u5177\u7528\u6765\u9a8c\u8bc1operator\u6253\u5305\u5e76\u8fd0\u884c\u6d4b\u8bd5 go.mod go\u8bed\u8a00\u4f9d\u8d56 hack/boilerplate.go.txt \u751f\u6210\u7684\u6587\u4ef6\u5934\u90e8\u6dfb\u52a0\u7684license main.go \u4e3b\u51fd\u6570 \u521b\u5efaAPI \uf0c1 \u276f operator-sdk create api --group mario.horizon --version v1 --kind Pipeline --resource --controller Writing kustomize manifests for you to edit... Writing scaffold for you to edit... api/v1/pipeline_types.go controllers/pipeline_controller.go Update dependencies: $ go mod tidy Running make: $ make generate go: creating new go.mod: module tmp Downloading sigs.k8s.io/controller-tools/cmd/controller-gen@v0.7.0 go get: installing executables with 'go get' in module mode is deprecated. To adjust and download dependencies of the current module, use 'go get -d'. To install using requirements of the current module, use 'go install'. To install ignoring the current module, use 'go install' with a version, like 'go install example.com/cmd@latest'. For more information, see https://golang.org/doc/go-get-install-deprecation or run 'go help get' or 'go help install'. go get: added github.com/fatih/color v1.12.0 go get: added github.com/go-logr/logr v0.4.0 go get: added github.com/gobuffalo/flect v0.2.3 go get: added github.com/gogo/protobuf v1.3.2 go get: added github.com/google/go-cmp v0.5.6 go get: added github.com/google/gofuzz v1.1.0 go get: added github.com/inconshreveable/mousetrap v1.0.0 go get: added github.com/json-iterator/go v1.1.11 go get: added github.com/mattn/go-colorable v0.1.8 go get: added github.com/mattn/go-isatty v0.0.12 go get: added github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd go get: added github.com/modern-go/reflect2 v1.0.1 go get: added github.com/spf13/cobra v1.2.1 go get: added github.com/spf13/pflag v1.0.5 go get: added golang.org/x/mod v0.4.2 go get: added golang.org/x/net v0.0.0-20210520170846-37e1c6afe023 go get: added golang.org/x/sys v0.0.0-20210616094352-59db8d763f22 go get: added golang.org/x/text v0.3.6 go get: added golang.org/x/tools v0.1.5 go get: added golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1 go get: added gopkg.in/inf.v0 v0.9.1 go get: added gopkg.in/yaml.v2 v2.4.0 go get: added gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b go get: added k8s.io/api v0.22.2 go get: added k8s.io/apiextensions-apiserver v0.22.2 go get: added k8s.io/apimachinery v0.22.2 go get: added k8s.io/klog/v2 v2.9.0 go get: added k8s.io/utils v0.0.0-20210819203725-bdf08cb9a70a go get: added sigs.k8s.io/controller-tools v0.7.0 go get: added sigs.k8s.io/structured-merge-diff/v4 v4.1.2 go get: added sigs.k8s.io/yaml v1.2.0 /Users/qianguodong/Projects/src/github.com/guodongq/mario/bin/controller-gen object:headerFile=\"hack/boilerplate.go.txt\" paths=\"./...\" Next: implement your new API and generate the manifests (e.g. CRDs,CRs) with: $ make manifests \u9879\u76ee\u4e2d\u81ea\u52a8\u589e\u52a0\u4e86\u5f88\u591a\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u65b0\u589e\u52a0\u7684\u5185\u5bb9\u4e2d\uff0c\u6700\u6838\u5fc3\u7684\u662fCRD\u4e86\uff0c\u4e5f\u5c31\u662f\u4e0a\u56fe\u4e2dPipeline\u6570\u636e\u7ed3\u6784\u6240\u5728\u7684 pipeline_types.go , \u8fd9\u4e2a\u6700\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\u5982\u4e0b // Pipeline is the Schema for the pipelines API type Pipeline struct { metav1.TypeMeta `json:\",inline\"` metav1.ObjectMeta `json:\"metadata,omitempty\"` Spec PipelineSpec `json:\"spec,omitempty\"` Status PipelineStatus `json:\"status,omitempty\"` } metav1.TypeMeta: \u4fdd\u5b58\u8d44\u6e90\u7684Group\u3001Version\u3001Kind metav1.ObjectMeta: \u4fdd\u5b58\u8d44\u6e90\u5bf9\u8c61\u7684\u540d\u79f0\u548cnamespace Spec: \u671f\u671b\u72b6\u6001 Status: \u5b9e\u9645\u72b6\u6001 \u8fd8\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u5c31\u662fPipeline\u5bf9\u5e94\u7684\u5217\u8868PipelineList,\u5c31\u662f\u5355\u4e2a\u8d44\u6e90\u5bf9\u8c61\u7684\u96c6\u5408 \u5b9a\u4e49CRD \uf0c1 \u5728operator-sdk\u751f\u6210\u7684\u9879\u76ee\u7ed3\u6784\u4e2d\u7684 pipeline_types.go \u6587\u4ef6\u4e2d\u5b9a\u4e49Spec\u548cStatus \u7f16\u5199Controller\u903b\u8f91 \uf0c1 \u5728operator-sdk\u751f\u6210\u7684\u9879\u76ee\u7ed3\u6784\u4e2d\u7684 pipeline_controller.go \u6587\u4ef6\u4e2d\u5b9e\u73b0Reconcile\u7684\u903b\u8f91 \u6d4b\u8bd5\u53d1\u5e03 \uf0c1 \u672c\u5730\u8c03\u8bd5\u4ee5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528Makefile\u6784\u5efa\u955c\u50cf\uff0c\u90e8\u7f72\u6211\u4eec\u7684CRDs\u548cController\u5373\u53ef make docker-build IMG=imbruce/mario:v1.0.23 make docker-push IMG=imbruce/mario:v1.0.23 make deploy IMG=imbruce/mario:v1.0.23 Local Debug \uf0c1 CRD controller\u662f\u901a\u8fc7API Server\u6765\u89c2\u5bdfETCD\u4e2dCR\u8d44\u6e90\u7684\u53d8\u5316\u4ea7\u751f\u7684\u4e8b\u4ef6\uff0c\u4ece\u800c\u8fdb\u884cReconcile\u8c03\u8c10\u903b\u8f91\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u53ef\u4ee5\u5728\u672c\u5730\u8fdb\u884ccrd controller\u7684\u8c03\u8bd5 \u5f53\u9700\u8981\u5728\u672c\u5730\u8fdb\u884c\u8c03\u8bd5\u65f6\uff0c\u9700\u8981\u505a\u5982\u4e0b\u6b65\u9aa4 export KUBECONFIG=*** \u6307\u5b9a\u4f7f\u7528\u7684k8s\u7684kubeconfig\u6587\u4ef6 make install \u5c06CRD\u5b9a\u4e49\u5b89\u88c5\u5230Kubernetes Cluster\u4e4b\u4e2d \u672c\u5730\u542f\u52a8crd controller\u5373\u53ef \u603b\u7ed3 \uf0c1 operator-sdk\u7f16\u5199crd\u7684\u6d41\u7a0b \uf0c1 \u4f7f\u7528operator-sdk\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Operator\u9879\u76ee \u6dfb\u52a0\u81ea\u5b9a\u4e49\u8d44\u6e90(CRD)\u5b9a\u4e49\u65b0\u7684\u8d44\u6e90API \u4e30\u5bcc\u5b8c\u5584CRD\u7684\u7ed3\u6784\u5b9a\u4e49 \u5b9a\u4e49Operator\u7684\u8c03\u8c10(reconcile)\u903b\u8f91 \u4f7f\u7528Operator SDK\u6784\u5efa\u5e76\u751f\u6210Operator\u90e8\u7f72\u6e05\u5355\u6587\u4ef6 \u90e8\u7f72CRD\u5230Kubernetes Cluster\u4e2d \u5982\u4f55\u81ea\u5b9a\u4e49\u663e\u793a\u5217? \uf0c1 \u4ece1.11\u4ee5\u540e, kubectl get \u53ef\u4ee5\u589e\u52a0\u663e\u793a\u7684\u5217,\u901a\u8fc7\u6807\u8bb0 +kubebuilder:printcolumn \u8fdb\u884c\u6dfb\u52a0 \u5982\u4f55\u901a\u8fc7rbac\u6dfb\u52a0\u6743\u9650\uff1f \uf0c1 \u5982\u4e0b\u56feReconcile\u65b9\u6cd5\u524d\u9762\u6709\u4e00\u4e9b +kubebuilder:rbac \u7684\u524d\u7f00\uff0c\u8fd9\u4e9b\u662f\u7528\u6765\u786e\u4fddcontroller\u5728\u8fd0\u884c\u65f6\u6709\u76f8\u5e94\u7684\u8d44\u6e90\u64cd\u4f5c\u6743\u9650 \u5982\u4f55\u5bf9\u5b57\u6bb5\u6dfb\u52a0\u6821\u9a8c? \uf0c1 \u4f7f\u7528\u6ce8\u89e3 +kubebuilder:validation:*** \u5bf9\u9700\u8981\u7684\u5b57\u6bb5\u6dfb\u52a0\u6821\u9a8c\u89c4\u5219,\u5177\u4f53\u53ef\u4ee5 \u53c2\u8003 Reconcile\u65b9\u6cd5\u4ec0\u4e48\u65f6\u5019\u88ab\u8c03\u5ea6? \uf0c1 For: \u5f53\u76d1\u63a7\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u5316\u65f6 Owns: \u5f53\u4ece\u5c5e\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u5316\u65f6 Reconcile\u65b9\u6cd5\u4ec0\u4e48\u65f6\u5019\u88ab\u518d\u6b21\u8c03\u5ea6? \uf0c1 \u901a\u8fc7\u67e5\u770bReconcile\u7684\u6e90\u7801\uff0c\u53d1\u73b0\u5f53\u5982\u4e0b\u6761\u4ef6\u53d1\u751f\u65f6\uff0creconcile\u65b9\u6cd5\u4f1a\u88ab\u518d\u6b21\u8c03\u5ea6\u8d77\u6765 \u8fd4\u56de\u9519\u8bef\uff1a return reconcile.Result{}, err \u6ca1\u6709error\uff0c\u663e\u5f0f\u6307\u5b9a\u653e\u5230\u961f\u5217\u4e2d: return reconcile.Result{Requeue: true}, nil \u6ca1\u6709error\uff0c\u663e\u5f0f\u6307\u5b9a\u4e0b\u4e00\u6b21\u89e6\u53d1\u7684\u65f6\u95f4\uff0c\u4e00\u822c\u7528\u5728cronjob\u4e2d\uff1a return reconcile.Result{RequeueAfter: time.Second}, nil PS: \u5982\u679c\u60f3\u8981\u7ec8\u6b62Reconcile\u903b\u8f91\uff0c\u8bf7\u8fd4\u56de return reconcile.Result{}, nil \u5f53\u5220\u9664CR\u8d44\u6e90\u65f6\uff0c\u88abCR\u7ba1\u7406\u7684\u5176\u4ed6\u8d44\u6e90\u600e\u6837\u540c\u65f6\u88ab\u5220\u9664? \uf0c1 \u5f53\u6211\u4eec\u521b\u5efa\u4e00\u79cd\u8d44\u6e90\u7684\u65f6\u5019\uff0c\u987a\u5e26\u7740\u4f1a\u521b\u5efa\u4e00\u4e9b\u5176\u4ed6\u7684\u8d44\u6e90\uff0c\u4f8b\u5982 eployment\u4f1a\u521b\u5efaReplicaset\uff0creplicaset\u4f1a\u521b\u5efaPod \u5f53\u6211\u4eec\u5220\u9664\u67d0\u79cd\u8d44\u6e90\u65f6\uff0c\u5176\u4ed6\u987a\u5e26\u521b\u5efa\u7684\u8d44\u6e90\u4e5f\u4e00\u5e76\u5220\u9664\uff0c\u4f7f\u7528OwnReference\u8fdb\u884c\u5783\u573e\u6e05\u7406","title":"\u7f16\u5199Kubernetes CRD\u6269\u5c55Kubernetes API"},{"location":"kubernetes/crd/#kubernetes-crdkubernetes-api","text":"","title":"\u7f16\u5199Kubernetes CRD\u6269\u5c55Kubernetes API"},{"location":"kubernetes/crd/#_1","text":"\u547d\u4ee4\u5f0f\u7f16\u7a0b\uff1a\u8be6\u7ec6\u7684\u547d\u4ee4\u673a\u5668\u600e\u4e48(How)\u53bb\u5904\u7406\u4e00\u4ef6\u4e8b\u60c5\u4ee5\u8fbe\u5230\u4f60\u60f3\u8981\u7684\u7ed3\u679c(What) \u58f0\u660e\u5f0f\u7f16\u7a0b\uff1a\u53ea\u544a\u8bc9\u4f60\u60f3\u8981\u7684\u7ed3\u679c(What)\uff0c\u673a\u5668\u81ea\u5df1\u6478\u7d22\u8fc7\u7a0b(How) \u5728Kubernetes\u4e2d\u4e00\u822c\u4f1a\u7f16\u5199\u5bf9\u5e94API\u5bf9\u8c61\u7684YAML\u6587\u4ef6\u4ea4\u7ed9Kubernetes(\u800c\u4e0d\u662f\u4f7f\u7528\u4e00\u4e9b\u547d\u4ee4\u6765\u76f4\u63a5\u64cd\u4f5cAPI)\uff0c\u5373\u53ea\u9700\u8981\u63d0\u4ea4\u4e00\u4e2a\u5b9a\u4e49\u597d\u7684API\u5bf9\u8c61\u6765\"\u58f0\u660e\"\uff08\u8fd9\u4e2aYAML\u6587\u4ef6\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\"\u58f0\u660e\"),\u8868\u793a\u6240\u671f\u671b\u7684\u6700\u7ec8\u72b6\u6001\u662f\u4ec0\u4e48\u6837\u5b50\u5c31\u53ef\u4ee5\u4e86 \u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u7ec8\u72b6\u6001\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u901a\u8fc7K8s\u6765\u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\uff0c\u901a\u8fc7\u8fd9\u79cd\u58f0\u660e\u5f0f\u7684\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u5e94\u7528\u7684\u914d\u7f6e\u7ba1\u7406\u590d\u6742\u5ea6","title":"\u58f0\u660e\u5f0f\u7f16\u7a0b"},{"location":"kubernetes/crd/#gvkgvr","text":"\u5728Kubernetes\u4e2d\u60f3\u8981\u5b8c\u6210\u4e00\u4e2aCRD\uff0c\u9700\u8981\u6307\u5b9a group/version \u548c kind , \u5728kuberntes\u7684API Server\u4e2d\u7b80\u79f0\u4e3aGVK\uff0cGVK\u662f\u5b9a\u4f4d\u4e00\u79cd\u7c7b\u578b\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982daemonsets\u5c31\u662fKubernetes\u7684\u4e00\u79cd\u8d44\u6e90\uff0c\u5f53\u6211\u4eec\u60f3\u8981\u901a\u8fc7Kubernetes\u521b\u5efa\u4e00\u4e2adaemonsets\u7684\u65f6\u5019\uff0c\u9700\u8981\u5b9a\u4e49daemonsets\u7684\u63cf\u8ff0\u6587\u4ef6 apiVersion: apps/v1 kind: DaemonSet \u8fd9\u91cc\u58f0\u660e\u4e86apiVersion\u662f apps/v1 ,\u5176\u5b9e\u9690\u542b\u4e86Group\u662fapps\uff0cVersion\u662fv1\uff0cKind\u662f\u5b9a\u4e49\u7684DaemonSet\uff0c\u800ckubectl\u63a5\u6536\u5230\u8fd9\u4e2a\u58f0\u660e\u4ee5\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u58f0\u660e\u53bb\u8c03\u7528API Server\u5bf9\u5e94\u7684URL\u53bb\u83b7\u53d6\u4fe1\u606f\uff0c\u672c\u4f8b\u4e2d\u5c31\u662f /apis/apps/v1/daemonset Kubernetes\u7ec4\u7ec7\u8d44\u6e90\u7684\u65b9\u5f0f\u662f\u4ee5REST\u7684URI\u5f62\u5f0f\u7684\uff0c\u800c\u7ec4\u7ec7\u7684\u8def\u5f84\u5c31\u662f\uff1a \u5728API Server\u4e2d\u8fd8\u6709\u7b2c\u4e8c\u4e2a\u6982\u5ff5GVR, \u5f53\u6211\u4eec\u7406\u89e3\u4e86GVK\u4e4b\u540e\uff0c\u518d\u6765\u7406\u89e3GVR\u5c31\u5bb9\u6613\u4e86\uff0c\u548c\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u7684\u7c7b\u548c\u5bf9\u8c61\u7684\u6982\u5ff5\u662f\u4e00\u6837\u7684 Kubernetes OOP Kind Class Resource Object Kind\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7c7b\uff0c\u7528\u4e8e\u63cf\u8ff0\u5bf9\u8c61\u7684\uff0c\u800cResource\u5c31\u662f\u5177\u4f53\u7684Kind\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u7c7b\u5df2\u7ecf\u5b9e\u4f8b\u5316\u6210\u5bf9\u8c61\u4e86","title":"GVK&amp;&amp;GVR"},{"location":"kubernetes/crd/#_2","text":"kubernetes\u4f5c\u4e3a\u4e00\u4e2a\u201c\u5bb9\u5668\u7f16\u6392\u201d\u5e73\u53f0\uff0c\u5176\u6838\u5fc3\u7684\u529f\u80fd\u662f\u7f16\u6392\uff0cPod\u4f5c\u4e3aK8s\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u5177\u5907\u5f88\u591a\u5c5e\u6027\u548c\u5b57\u6bb5\uff0ck8s\u7f16\u6392\u6b63\u662f\u901a\u8fc7\u4e00\u4e2a\u4e2a\u63a7\u5236\u5668\u6839\u636e\u88ab\u63a7\u5236\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u5b57\u6bb5\u6765\u5b9e\u73b0\u3002 K8s\u96c6\u7fa4\u5728\u90e8\u7f72\u65f6\u5305\u542b\u4e86Controllers\u7ec4\u4ef6\uff0c\u91cc\u9762\u5bf9\u4e8e\u6bcf\u4e2abuild-in\u7684\u8d44\u6e90\u7c7b\u578b\uff08\u6bd4\u5982Deployment\u3001Statefulset\u3001Cronjob\u2026\uff09\u90fd\u6709\u5bf9\u5e94\u7684Controller\uff0c\u57fa\u672c\u662f1:1\u7684\u5173\u7cfb apiVersion: apps/v1 kind: Deployment metadata: name: test spec: selector: matchLabels: app: test replicas: 2 template: metadata: labels: app: test spec: containers: - name: nginx image: nginx:1.7.9 ports: - containerPort: 80 \u5982\u4e0a\uff0cDeployment\u8d44\u6e90\u521b\u5efa\u4ee5\u540e\uff0c\u5bf9\u5e94\u7684Deployment Controller\u786e\u4fdd\u5f53\u524d\u7684deployment\u8d44\u6e90\u7684Pod\u4e2a\u6570\u6c38\u8fdc\u4e3a2\uff0cPod\u7531Template\u90e8\u5206\u7ec4\u6210,\u5177\u4f53\u6765\u8bf4K8s\u91cc\u9762\u7684kube-controller-manager\u8fd9\u4e2a\u7ec4\u4ef6\u5728\u505a\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u5728 kubernetes/pkg/controller \u76ee\u5f55\u4e0b\u5305\u542b\u4e86\u6240\u6709\u7684\u63a7\u5236\u5668\uff0c\u5b83\u4eec\u90fd\u4ee5\u72ec\u6709\u7684\u65b9\u5f0f\u8d1f\u8d23\u67d0\u79cd\u7f16\u6392\u529f\u80fd\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u9075\u5faa\u4e00\u4e2a\u901a\u7528\u7684\u7f16\u6392\u6a21\u5f0f\uff0c\u5373\uff1a\u8c03\u8c10\u5faa\u73af(Reconcile loop),\u4f2a\u4ee3\u7801\u903b\u8f91\u5982\u4e0b: for { actualState := GetResourceActualState(rsvc) expectState := GetResourceExpectState(rsvc) if actualState == expectState { // do nothing } else { Reconcile(rsvc) } } \u5c31\u662f\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u4e0d\u65ad\u5730\u5bf9\u6bd4\u671f\u671b\u72b6\u6001\u548c\u5b9e\u9645\u72b6\u6001\uff0c\u5982\u679c\u6709\u51fa\u5165\u5219\u8fdb\u884cReconcile(\u8c03\u8c10)\u903b\u8f91\u5c06\u5b9e\u9645\u72b6\u6001\u8c03\u6574\u4e3a\u671f\u671b\u72b6\u6001 \u671f\u671b\u72b6\u6001\u5c31\u662f\u6211\u4eec\u5bf9\u8c61\u7684\u5b9a\u4e49(\u901a\u5e38\u662fYAML\u6587\u4ef6),\u5b9e\u9645\u72b6\u6001\u662fk8s\u96c6\u7fa4\u91cc\u9762\u5f53\u524d\u7684\u8fd0\u884c\u72b6\u6001 \u63a7\u5236\u5668\u7684\u7f16\u6392\u903b\u8f91\u4e3b\u8981\u662f\u7b2c\u4e09\u6b65\u505a\u7684\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u79f0\u4e3a\u8c03\u8c10(Reconcile),\u6574\u4e2a\u63a7\u5236\u5668\u7684\u8c03\u8c10\u8fc7\u7a0b\u79f0\u4e3a\"Reconcile Loop\"","title":"\u63a7\u5236\u5668\u6a21\u5f0f"},{"location":"kubernetes/crd/#_3","text":"code-generator kubebuilder operator-sdk code-generator \u5b9e\u9645\u4e0a\u5e76\u4e0d\u80fd\u79f0\u4e4b\u4e3acrd\u5f00\u53d1\u7684\u811a\u624b\u67b6\uff0c\u5b83\u53ea\u662f\u80fd\u751f\u6210\u4e00\u4e9b\u4ee3\u7801\uff0c\u5982\u679c\u7528code-generator\u8fdb\u884ccrd\u7684\u5f00\u53d1\u9700\u8981\u624b\u5de5\u7f16\u5199\u5f88\u591a\u4ee3\u7801 kubebuilder \u548c operator-sdk \u90fd\u662f\u4e3a\u4e86\u65b9\u4fbf\u521b\u5efa\u548c\u7ba1\u7406operator\u800c\u751f\u7684\u811a\u624b\u67b6\u9879\u76ee, operator-sdk \u5728\u5e95\u5c42\u4f7f\u7528\u4e86 kubebuilder ,\u4e24\u8005\u5728\u521b\u5efaoperator\u9879\u76ee\u65f6\u90fd\u662f\u8c03\u7528 controller-runtime \u63a5\u53e3\uff0c\u5177\u6709\u76f8\u540c\u7684\u9879\u76ee\u5e03\u5c40\u3002 \u9664\u6b64\u4e4b\u5916 operator-sdk \u8fd8\u589e\u52a0\u4e86\u4e00\u4e9b\u7279\u6027\uff0c\u5177\u4f53\u53ef\u4ee5 \u53c2\u8003 \u4e24\u8005\u4e0d\u662f\u7ade\u4e89\u5173\u7cfb, operator-sdk \u76f8\u5f53\u4e8e\u662f kubebuilder+ operator-sdk \u7684\u6587\u6863\u8d28\u91cf\u9ad8\uff0c\u611f\u89c9 operator-sdk \u66f4\u50cf\u662f\u5546\u4e1a\u7248\u672c\u7684kubebuilder,\u5b9e\u9645\u4e0a\u5b83\u4eec\u90fd\u662f\u5f00\u6e90\u7684","title":"\u5f00\u53d1\u811a\u624b\u67b6"},{"location":"kubernetes/crd/#operator-sdk-getting-started","text":"","title":"Operator SDK Getting Started"},{"location":"kubernetes/crd/#_4","text":"\u5728\u5f00\u53d1CRD\u4e4b\u524d\uff0c\u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u5de5\u5177\uff0c\u5177\u4f53\u7684\u53ef\u4ee5 \u53c2\u8003 operator-sdk git go docker kubectl","title":"\u5b89\u88c5\u4f9d\u8d56"},{"location":"kubernetes/crd/#_5","text":"\u276f mkdir mario \u276f cd mario \u276f pwd /Users/qianguodong/Projects/src/github.com/guodongq/mario \u276f operator-sdk init --domain qgd.io --repo github.com/guodongq/mario Writing kustomize manifests for you to edit... Writing scaffold for you to edit... Get controller runtime: $ go get sigs.k8s.io/controller-runtime@v0.10.0 Update dependencies: $ go mod tidy Next: define a resource with: $ operator-sdk create api \u276f tree -L 2 . \u251c\u2500\u2500 Dockerfile \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 PROJECT \u251c\u2500\u2500 config \u2502 \u251c\u2500\u2500 default \u2502 \u251c\u2500\u2500 manager \u2502 \u251c\u2500\u2500 manifests \u2502 \u251c\u2500\u2500 prometheus \u2502 \u251c\u2500\u2500 rbac \u2502 \u2514\u2500\u2500 scorecard \u251c\u2500\u2500 go.mod \u251c\u2500\u2500 go.sum \u251c\u2500\u2500 hack \u2502 \u2514\u2500\u2500 boilerplate.go.txt \u2514\u2500\u2500 main.go 8 directories, 7 files \u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4\u540e\u4f1a\u751f\u6210\u57fa\u672c\u7684\u76ee\u5f55\u7ed3\u6784\uff0c\u5bf9\u5176\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\u89e3\u91ca\u5982\u4e0b Dockerfile \u7528\u4e8e\u6784\u5efaDocker\u955c\u50cf Makefile \u7f16\u8bd1\u3001\u6784\u5efa\u3001\u90e8\u7f72operator\u90fd\u4f1a\u7528\u5230\u8be5\u6587\u4ef6 PROJECT \u5de5\u7a0b\u7684\u5143\u6570\u636e\uff0c\u5728\u751f\u6210\u5404\u79cdAPI\u7684\u65f6\u5019\u4f1a\u7528\u5230\u8fd9\u91cc\u9762\u7684\u4fe1\u606f config/default \u57fa\u4e8ekustomize\u5236\u4f5c\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3acontroller\u63d0\u4f9b\u6807\u51c6\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u53bb\u4fee\u6539\u8c03\u6574 config/manager \u548ccontroller\u6709\u5173\u7684\u7ec6\u8282\u914d\u7f6e\uff0c\u4f8b\u5982\u955c\u50cf\u7684\u8d44\u6e90\u9650\u5236 config/manifests \u57fa\u4e8ekustomize\u65b9\u5f0f\u7ba1\u7406operator\u751f\u6210\u7684\u6240\u6709manifest config/rbac operator\u5728kubernetes\u4e2d\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u901a\u8fc7rbac\u505a\u7cbe\u7ec6\u7684\u6743\u9650\u914d\u7f6e config/scorecard \u5de5\u5177\u7528\u6765\u9a8c\u8bc1operator\u6253\u5305\u5e76\u8fd0\u884c\u6d4b\u8bd5 go.mod go\u8bed\u8a00\u4f9d\u8d56 hack/boilerplate.go.txt \u751f\u6210\u7684\u6587\u4ef6\u5934\u90e8\u6dfb\u52a0\u7684license main.go \u4e3b\u51fd\u6570","title":"\u521b\u5efa\u811a\u624b\u67b6\u5de5\u7a0b"},{"location":"kubernetes/crd/#api","text":"\u276f operator-sdk create api --group mario.horizon --version v1 --kind Pipeline --resource --controller Writing kustomize manifests for you to edit... Writing scaffold for you to edit... api/v1/pipeline_types.go controllers/pipeline_controller.go Update dependencies: $ go mod tidy Running make: $ make generate go: creating new go.mod: module tmp Downloading sigs.k8s.io/controller-tools/cmd/controller-gen@v0.7.0 go get: installing executables with 'go get' in module mode is deprecated. To adjust and download dependencies of the current module, use 'go get -d'. To install using requirements of the current module, use 'go install'. To install ignoring the current module, use 'go install' with a version, like 'go install example.com/cmd@latest'. For more information, see https://golang.org/doc/go-get-install-deprecation or run 'go help get' or 'go help install'. go get: added github.com/fatih/color v1.12.0 go get: added github.com/go-logr/logr v0.4.0 go get: added github.com/gobuffalo/flect v0.2.3 go get: added github.com/gogo/protobuf v1.3.2 go get: added github.com/google/go-cmp v0.5.6 go get: added github.com/google/gofuzz v1.1.0 go get: added github.com/inconshreveable/mousetrap v1.0.0 go get: added github.com/json-iterator/go v1.1.11 go get: added github.com/mattn/go-colorable v0.1.8 go get: added github.com/mattn/go-isatty v0.0.12 go get: added github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd go get: added github.com/modern-go/reflect2 v1.0.1 go get: added github.com/spf13/cobra v1.2.1 go get: added github.com/spf13/pflag v1.0.5 go get: added golang.org/x/mod v0.4.2 go get: added golang.org/x/net v0.0.0-20210520170846-37e1c6afe023 go get: added golang.org/x/sys v0.0.0-20210616094352-59db8d763f22 go get: added golang.org/x/text v0.3.6 go get: added golang.org/x/tools v0.1.5 go get: added golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1 go get: added gopkg.in/inf.v0 v0.9.1 go get: added gopkg.in/yaml.v2 v2.4.0 go get: added gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b go get: added k8s.io/api v0.22.2 go get: added k8s.io/apiextensions-apiserver v0.22.2 go get: added k8s.io/apimachinery v0.22.2 go get: added k8s.io/klog/v2 v2.9.0 go get: added k8s.io/utils v0.0.0-20210819203725-bdf08cb9a70a go get: added sigs.k8s.io/controller-tools v0.7.0 go get: added sigs.k8s.io/structured-merge-diff/v4 v4.1.2 go get: added sigs.k8s.io/yaml v1.2.0 /Users/qianguodong/Projects/src/github.com/guodongq/mario/bin/controller-gen object:headerFile=\"hack/boilerplate.go.txt\" paths=\"./...\" Next: implement your new API and generate the manifests (e.g. CRDs,CRs) with: $ make manifests \u9879\u76ee\u4e2d\u81ea\u52a8\u589e\u52a0\u4e86\u5f88\u591a\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a \u65b0\u589e\u52a0\u7684\u5185\u5bb9\u4e2d\uff0c\u6700\u6838\u5fc3\u7684\u662fCRD\u4e86\uff0c\u4e5f\u5c31\u662f\u4e0a\u56fe\u4e2dPipeline\u6570\u636e\u7ed3\u6784\u6240\u5728\u7684 pipeline_types.go , \u8fd9\u4e2a\u6700\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\u5982\u4e0b // Pipeline is the Schema for the pipelines API type Pipeline struct { metav1.TypeMeta `json:\",inline\"` metav1.ObjectMeta `json:\"metadata,omitempty\"` Spec PipelineSpec `json:\"spec,omitempty\"` Status PipelineStatus `json:\"status,omitempty\"` } metav1.TypeMeta: \u4fdd\u5b58\u8d44\u6e90\u7684Group\u3001Version\u3001Kind metav1.ObjectMeta: \u4fdd\u5b58\u8d44\u6e90\u5bf9\u8c61\u7684\u540d\u79f0\u548cnamespace Spec: \u671f\u671b\u72b6\u6001 Status: \u5b9e\u9645\u72b6\u6001 \u8fd8\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u5c31\u662fPipeline\u5bf9\u5e94\u7684\u5217\u8868PipelineList,\u5c31\u662f\u5355\u4e2a\u8d44\u6e90\u5bf9\u8c61\u7684\u96c6\u5408","title":"\u521b\u5efaAPI"},{"location":"kubernetes/crd/#crd","text":"\u5728operator-sdk\u751f\u6210\u7684\u9879\u76ee\u7ed3\u6784\u4e2d\u7684 pipeline_types.go \u6587\u4ef6\u4e2d\u5b9a\u4e49Spec\u548cStatus","title":"\u5b9a\u4e49CRD"},{"location":"kubernetes/crd/#controller","text":"\u5728operator-sdk\u751f\u6210\u7684\u9879\u76ee\u7ed3\u6784\u4e2d\u7684 pipeline_controller.go \u6587\u4ef6\u4e2d\u5b9e\u73b0Reconcile\u7684\u903b\u8f91","title":"\u7f16\u5199Controller\u903b\u8f91"},{"location":"kubernetes/crd/#_6","text":"\u672c\u5730\u8c03\u8bd5\u4ee5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528Makefile\u6784\u5efa\u955c\u50cf\uff0c\u90e8\u7f72\u6211\u4eec\u7684CRDs\u548cController\u5373\u53ef make docker-build IMG=imbruce/mario:v1.0.23 make docker-push IMG=imbruce/mario:v1.0.23 make deploy IMG=imbruce/mario:v1.0.23","title":"\u6d4b\u8bd5\u53d1\u5e03"},{"location":"kubernetes/crd/#local-debug","text":"CRD controller\u662f\u901a\u8fc7API Server\u6765\u89c2\u5bdfETCD\u4e2dCR\u8d44\u6e90\u7684\u53d8\u5316\u4ea7\u751f\u7684\u4e8b\u4ef6\uff0c\u4ece\u800c\u8fdb\u884cReconcile\u8c03\u8c10\u903b\u8f91\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u53ef\u4ee5\u5728\u672c\u5730\u8fdb\u884ccrd controller\u7684\u8c03\u8bd5 \u5f53\u9700\u8981\u5728\u672c\u5730\u8fdb\u884c\u8c03\u8bd5\u65f6\uff0c\u9700\u8981\u505a\u5982\u4e0b\u6b65\u9aa4 export KUBECONFIG=*** \u6307\u5b9a\u4f7f\u7528\u7684k8s\u7684kubeconfig\u6587\u4ef6 make install \u5c06CRD\u5b9a\u4e49\u5b89\u88c5\u5230Kubernetes Cluster\u4e4b\u4e2d \u672c\u5730\u542f\u52a8crd controller\u5373\u53ef","title":"Local Debug"},{"location":"kubernetes/crd/#_7","text":"","title":"\u603b\u7ed3"},{"location":"kubernetes/crd/#operator-sdkcrd","text":"\u4f7f\u7528operator-sdk\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Operator\u9879\u76ee \u6dfb\u52a0\u81ea\u5b9a\u4e49\u8d44\u6e90(CRD)\u5b9a\u4e49\u65b0\u7684\u8d44\u6e90API \u4e30\u5bcc\u5b8c\u5584CRD\u7684\u7ed3\u6784\u5b9a\u4e49 \u5b9a\u4e49Operator\u7684\u8c03\u8c10(reconcile)\u903b\u8f91 \u4f7f\u7528Operator SDK\u6784\u5efa\u5e76\u751f\u6210Operator\u90e8\u7f72\u6e05\u5355\u6587\u4ef6 \u90e8\u7f72CRD\u5230Kubernetes Cluster\u4e2d","title":"operator-sdk\u7f16\u5199crd\u7684\u6d41\u7a0b"},{"location":"kubernetes/crd/#_8","text":"\u4ece1.11\u4ee5\u540e, kubectl get \u53ef\u4ee5\u589e\u52a0\u663e\u793a\u7684\u5217,\u901a\u8fc7\u6807\u8bb0 +kubebuilder:printcolumn \u8fdb\u884c\u6dfb\u52a0","title":"\u5982\u4f55\u81ea\u5b9a\u4e49\u663e\u793a\u5217?"},{"location":"kubernetes/crd/#rbac","text":"\u5982\u4e0b\u56feReconcile\u65b9\u6cd5\u524d\u9762\u6709\u4e00\u4e9b +kubebuilder:rbac \u7684\u524d\u7f00\uff0c\u8fd9\u4e9b\u662f\u7528\u6765\u786e\u4fddcontroller\u5728\u8fd0\u884c\u65f6\u6709\u76f8\u5e94\u7684\u8d44\u6e90\u64cd\u4f5c\u6743\u9650","title":"\u5982\u4f55\u901a\u8fc7rbac\u6dfb\u52a0\u6743\u9650\uff1f"},{"location":"kubernetes/crd/#_9","text":"\u4f7f\u7528\u6ce8\u89e3 +kubebuilder:validation:*** \u5bf9\u9700\u8981\u7684\u5b57\u6bb5\u6dfb\u52a0\u6821\u9a8c\u89c4\u5219,\u5177\u4f53\u53ef\u4ee5 \u53c2\u8003","title":"\u5982\u4f55\u5bf9\u5b57\u6bb5\u6dfb\u52a0\u6821\u9a8c?"},{"location":"kubernetes/crd/#reconcile","text":"For: \u5f53\u76d1\u63a7\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u5316\u65f6 Owns: \u5f53\u4ece\u5c5e\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u5316\u65f6","title":"Reconcile\u65b9\u6cd5\u4ec0\u4e48\u65f6\u5019\u88ab\u8c03\u5ea6?"},{"location":"kubernetes/crd/#reconcile_1","text":"\u901a\u8fc7\u67e5\u770bReconcile\u7684\u6e90\u7801\uff0c\u53d1\u73b0\u5f53\u5982\u4e0b\u6761\u4ef6\u53d1\u751f\u65f6\uff0creconcile\u65b9\u6cd5\u4f1a\u88ab\u518d\u6b21\u8c03\u5ea6\u8d77\u6765 \u8fd4\u56de\u9519\u8bef\uff1a return reconcile.Result{}, err \u6ca1\u6709error\uff0c\u663e\u5f0f\u6307\u5b9a\u653e\u5230\u961f\u5217\u4e2d: return reconcile.Result{Requeue: true}, nil \u6ca1\u6709error\uff0c\u663e\u5f0f\u6307\u5b9a\u4e0b\u4e00\u6b21\u89e6\u53d1\u7684\u65f6\u95f4\uff0c\u4e00\u822c\u7528\u5728cronjob\u4e2d\uff1a return reconcile.Result{RequeueAfter: time.Second}, nil PS: \u5982\u679c\u60f3\u8981\u7ec8\u6b62Reconcile\u903b\u8f91\uff0c\u8bf7\u8fd4\u56de return reconcile.Result{}, nil","title":"Reconcile\u65b9\u6cd5\u4ec0\u4e48\u65f6\u5019\u88ab\u518d\u6b21\u8c03\u5ea6?"},{"location":"kubernetes/crd/#crcr","text":"\u5f53\u6211\u4eec\u521b\u5efa\u4e00\u79cd\u8d44\u6e90\u7684\u65f6\u5019\uff0c\u987a\u5e26\u7740\u4f1a\u521b\u5efa\u4e00\u4e9b\u5176\u4ed6\u7684\u8d44\u6e90\uff0c\u4f8b\u5982 eployment\u4f1a\u521b\u5efaReplicaset\uff0creplicaset\u4f1a\u521b\u5efaPod \u5f53\u6211\u4eec\u5220\u9664\u67d0\u79cd\u8d44\u6e90\u65f6\uff0c\u5176\u4ed6\u987a\u5e26\u521b\u5efa\u7684\u8d44\u6e90\u4e5f\u4e00\u5e76\u5220\u9664\uff0c\u4f7f\u7528OwnReference\u8fdb\u884c\u5783\u573e\u6e05\u7406","title":"\u5f53\u5220\u9664CR\u8d44\u6e90\u65f6\uff0c\u88abCR\u7ba1\u7406\u7684\u5176\u4ed6\u8d44\u6e90\u600e\u6837\u540c\u65f6\u88ab\u5220\u9664?"},{"location":"kubernetes/extend/","text":"Kubernetes\u6269\u5c55 \uf0c1 \u76ee\u524dKubernetes\u5df2\u7ecf\u6210\u4e3a\u5bb9\u5668\u7f16\u6392\u7684\u4e8b\u5b9e\u6807\u51c6\uff0c\u5176\u672c\u8eab\u7684\u529f\u80fd\u4e5f\u662f\u975e\u5e38\u4e30\u5bcc\u5e76\u4e14\u7075\u6d3b\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u6ee1\u8db3\u6240\u6709\u4eba\u7684\u9700\u6c42\u3002\u5728\u9047\u5230Kubernetes\u63d0\u4f9b\u7684\u80fd\u529b\u65e0\u6cd5\u6ee1\u8db3\u6211\u4eec\u9700\u6c42\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528Kubernetes\u9ad8\u5ea6\u53ef\u914d\u7f6e\u4e14\u53ef\u6269\u5c55\u7684\u80fd\u529b\u8fdb\u884c\u5b9a\u5236\u3002 Kubernetes\u7684\u5b9a\u5236\u5316\u65b9\u6cd5\u4e3b\u8981\u5206\u4e3a\u914d\u7f6e\u548c\u6269\u5c55\u4e24\u79cd\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb2\u8ff0Kubernetes\u6269\u5c55\uff0c\u5b9e\u9645\u4e0a\u4ece\u5ba2\u6237\u7aef\u5230\u5e95\u5c42\u5bb9\u5668\u8fd0\u884c\u65f6\uff0c\u7edd\u5927\u90e8\u5206\u5730\u65b9Kubernetes\u90fd\u4e3a\u6211\u4eec\u9884\u7559\u4e86\u6269\u5c55\u70b9 Kubectl \uf0c1 \u7528\u6237\u901a\u5e38\u4f7f\u7528kubectl\u4e0eKubernetes API\u4ea4\u4e92\u3002 Kubectl\u63d2\u4ef6 \u80fd\u591f\u6269\u5c55Kubectl\u7684\u884c\u4e3a\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u63d2\u4ef6\u53ea\u4f1a\u5f71\u54cd\u5230\u6bcf\u4e2a\u7528\u6237\u7684\u672c\u5730\u73af\u5883 Kubectl\u5c06\u4f1a\u5728\u7528\u6237\u7684PATH\u8def\u5f84\u4e0b\u67e5\u627e kubectl-* \u4e3a\u524d\u7f00\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5e76\u4e14\u628a\u5b83\u5f53\u6210\u4e00\u4e2a\u63d2\u4ef6. \u4f8b\u5982tekton\u7684cli\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2akubectl\u63d2\u4ef6 kubectl-tkn \u65b9\u5f0f\u8fd0\u884c \u6709\u4e00\u4e9b\u5199\u597d\u7684kubectl plugins\u53ef\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u66f4\u591a\u4fe1\u606f\u8bf7\u8bbf\u95ee \u8fd9\u91cc ApiServer \uf0c1 APIServer\u5904\u7406\u6240\u6709\u7684\u8bf7\u6c42\uff0c\u5f53\u8bf7\u6c42\u5230\u8fbeAPIServer\u65f6\uff0c\u9700\u8981\u7ecf\u8fc7\u8ba4\u8bc1->\u9274\u6743->\u51c6\u5165\u63a7\u5236\u7684\u6b65\u9aa4\uff0c\u5728\u8fd9\u4e9b\u6b65\u9aa4\u4e2d\u90fd\u5b58\u5728\u6269\u5c55\u70b9 \u51c6\u5165\u63a7\u5236 \uf0c1 \u7528\u7684\u6700\u591a\u7684\u662f\u51c6\u5165\u63a7\u5236\u7684\u6269\u5c55\uff0c\u51c6\u5165\u63a7\u5236\u4f1a\u5148\u7ecf\u8fc7\u53d8\u66f4\u51c6\u5165\u63a7\u5236MutatingAdmissionWebhook\uff0c\u7136\u540e\u518d\u7ecf\u8fc7\u9a8c\u8bc1\u51c6\u5165\u63a7\u5236ValidatingAdmissionWebhook,\u4efb\u4f55\u4e00\u4e2a\u51c6\u5165\u63a7\u5236\u5668\u8fd4\u56de\u4e86\u9519\u8bef\u8fd9\u4e2a\u8bf7\u6c42\u90fd\u4f1a\u5931\u8d25\uff0c\u5728\u8fd9\u4e24\u4e2a\u51c6\u5165\u63a7\u5236\u5668\u4e2d\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u4f8b\u5982\u6ce8\u5165sidecar\uff0c\u9a8c\u8bc1\u8d44\u6e90\uff0c\u8c03\u6574pod\u7684\u914d\u989d\u7b49\u7b49 Kubernetes API\u8bbf\u95ee\u6269\u5c55 \u6df1\u5165\u7406\u89e3k8s\u4e2d\u7684\u8bbf\u95ee\u63a7\u5236 Aggregation Layer \uf0c1 \u4eceK8s 1.7\u7248\u672c\u4e4b\u540e\uff0cAPIServer\u5f15\u5165\u4e86\u805a\u5408\u5c42\u7684\u529f\u80fd\uff0cAPI Aggregation\u5141\u8bb8\u5728\u4e0d\u4fee\u6539Kubernetes\u6838\u5fc3\u4ee3\u7801\u7684\u540c\u65f6\u6269\u5c55Kubernetes API\uff0c\u5373\u5c06\u7b2c\u4e09\u65b9\u670d\u52a1\u6ce8\u518c\u5230Kubernetes API\u4e2d\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7Kubernetes API\u6765\u8bbf\u95ee\u5916\u90e8\u670d\u52a1 \u4f8b\u5982\uff1a\u5c06\u5982\u4e0b\u7684\u8d44\u6e90\u63d0\u4ea4\u7ed9K8s\u4ee5\u540e\uff0c\u5f53\u7528\u6237\u5728\u8bbf\u95eeApiServer\u7684/apis/metrics.kubernetes.io/v1beta1\u8def\u5f84\u65f6\uff0c\u4f1a\u88ab\u8f6c\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684metrics-server.kube-system.svc\u670d\u52a1\u4e0a apiVersion: apiregistration.Kubernetes.io/v1 kind: APIService metadata: name: v1beta1.metrics.Kubernetes.io spec: service: name: metrics-server namespace: kube-system group: metrics.Kubernetes.io version: v1beta1 insecureSkipTLSVerify: true groupPriorityMinimum: 100 versionPriority: 100 Kubernetes API Aggregator\u662f\u4ec0\u4e48 Kubernetes\u6269\u5c55apiserver\u5b9e\u73b0\u5206\u6790 Kube-Aggregator \u8d44\u6e90 \uf0c1 \u6211\u4eec\u5e38\u7528\u7684 Deployment , Pod , Node \u7b49\u90fd\u662fK8s\u5b98\u65b9\u63d0\u4f9b\u7684\u5185\u7f6e\u8d44\u6e90\uff0c\u4f46\u662f\u6709\u65f6\u5019\u5185\u7f6e\u8d44\u6e90\u65e0\u6cd5\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528CustomResource\uff0c\u5373\u81ea\u5b9a\u4e49\u8d44\u6e90 CR\u5e38\u5e38\u4f1a\u548ccontroller\u4e00\u8d77\u914d\u5408\u4f7f\u7528 \u63a7\u5236\u5668 \uf0c1 Kubernetes\u4e2d\u8d44\u6e90\u7684\u72b6\u6001\u7684\u7ef4\u62a4\u90fd\u662fController\u6765\u5b9e\u73b0\u7684\uff0ccontroller\u4f1a\u4e0d\u65ad\u5c1d\u8bd5\u5c06\u4e00\u4e2a\u8d44\u6e90\u8c03\u6574\u4e3a\u6211\u4eec\u63cf\u8ff0\u7684\u72b6\u6001\uff0c\u5373\u5e38\u8bf4\u7684\u58f0\u660e\u5f0fapi \u58f0\u660e\u5f0fAPI\u80cc\u540e\u5177\u4f53\u7684\u6d3b\u90fd\u662fcontroller\u5e72\u7684\uff0ccontroller\u4e00\u822c\u4f1a\u914d\u5408\u7740CRD\u4e00\u8d77\u4f7f\u7528 \u8c03\u5ea6\u5668 \uf0c1 Kubernetes\u8c03\u5ea6\u5668\u8d1f\u8d23\u51b3\u5b9aPod\u8981\u653e\u7f6e\u5230\u54ea\u4e9b\u8282\u70b9\u4e0a\u6267\u884c \u8c03\u5ea6\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u63a7\u5236\u5668\uff0c\u8d1f\u8d23\u76d1\u89c6Pod\u53d8\u5316\u5e76\u5c06Pod\u5206\u6d3e\u7ed9\u8282\u70b9\u3002\u9ed8\u8ba4\u7684\u8c03\u5ea6\u5668\u53ef\u4ee5\u88ab\u6574\u4f53\u66ff\u6362\u6389\u6216\u8005\u662f\u4f7f\u7528\u591a\u4e2a\u8c03\u5ea6\u5668 \u9664\u6b64\u4e4b\u5916\uff0c\u5b98\u65b9\u9ed8\u8ba4\u7684\u8c03\u5ea6\u5668\u4e5f\u652f\u6301WebHook \u8c03\u5ea6\u5668\u6269\u5c55 Kubernetes Scheduler \u7f51\u7edc\u63d2\u4ef6CNI \uf0c1 CNI\u7f51\u7edc\u63d2\u4ef6\uff0c\u5168\u79f0Container Network Interface(\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3)\uff0c\u7531\u4e00\u7ec4\u7528\u4e8e\u914d\u7f6eLinux\u5bb9\u5668\u7684\u7f51\u7edc\u63a5\u53e3\u7684\u89c4\u8303\u548c\u5e93\u7ec4\u6210\uff0c\u540c\u65f6\u8fd8\u5305\u542b\u4e00\u4e9b\u63d2\u4ef6 CNI\u4ec5\u5173\u5fc3\u5bb9\u5668\u521b\u5efa\u65f6\u7684\u7f51\u7edc\u5206\u914d\uff0c\u548c\u5f53\u5bb9\u5668\u88ab\u5220\u9664\u65f6\u91ca\u653e\u7f51\u7edc\u8d44\u6e90 CNI\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3 Container Network Interface \u5b58\u50a8\u63d2\u4ef6CSI \uf0c1 \u5168\u79f0\u662fContainer Storage Interface\uff0c\u53ef\u4ee5\u901a\u8fc7CSI\u63a5\u53e3\u652f\u6301\u4e0d\u540c\u7684\u5b58\u50a8\u7c7b\u578b \u63a8\u8350\u4e00\u4e2a\u52a8\u6001\u81ea\u52a8\u521b\u5efa\u672c\u5730\u76ee\u5f55\u4f5c\u4e3a\u6301\u4e45\u5316\u76ee\u5f55\u7684provisioner rancher/local-path-provisioner \u641e\u5b9a\u6301\u4e45\u5316\u5b58\u50a8 PV/PVC/StorageClass/Provisioner rancher provisioner \u5bb9\u5668\u5b58\u50a8\u63a5\u53e3 CSI\u63d2\u4ef6\u7f16\u5199\u6307\u5357 csi-spec \u4f7f\u7528CSI\u548cKubernetes\u5b9e\u73b0\u5377\u7684\u52a8\u6001\u6269\u5bb9 \u5bb9\u5668\u8fd0\u884c\u65f6CRI \uf0c1 \u5168\u79f0Container Runtime Interface,\u662f\u4e00\u7ec4\u7528\u4e8e\u7ba1\u7406\u5bb9\u5668\u8fd0\u884c\u65f6\u548c\u955c\u50cf\u7684gRPC\u63a5\u53e3\uff0c\u5229\u7528\u8fd9\u4e2a\u63a5\u53e3\u53ef\u4ee5\u652f\u6301docker\uff0ccontainerd\u7b49\u4e0d\u540c\u7684\u5bb9\u5668\u8fd0\u884c\u65f6 Container Runtime Interface CRI","title":"Kubernetes\u6269\u5c55"},{"location":"kubernetes/extend/#kubernetes","text":"\u76ee\u524dKubernetes\u5df2\u7ecf\u6210\u4e3a\u5bb9\u5668\u7f16\u6392\u7684\u4e8b\u5b9e\u6807\u51c6\uff0c\u5176\u672c\u8eab\u7684\u529f\u80fd\u4e5f\u662f\u975e\u5e38\u4e30\u5bcc\u5e76\u4e14\u7075\u6d3b\uff0c\u4f46\u662f\u4e5f\u4e0d\u80fd\u6ee1\u8db3\u6240\u6709\u4eba\u7684\u9700\u6c42\u3002\u5728\u9047\u5230Kubernetes\u63d0\u4f9b\u7684\u80fd\u529b\u65e0\u6cd5\u6ee1\u8db3\u6211\u4eec\u9700\u6c42\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528Kubernetes\u9ad8\u5ea6\u53ef\u914d\u7f6e\u4e14\u53ef\u6269\u5c55\u7684\u80fd\u529b\u8fdb\u884c\u5b9a\u5236\u3002 Kubernetes\u7684\u5b9a\u5236\u5316\u65b9\u6cd5\u4e3b\u8981\u5206\u4e3a\u914d\u7f6e\u548c\u6269\u5c55\u4e24\u79cd\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb2\u8ff0Kubernetes\u6269\u5c55\uff0c\u5b9e\u9645\u4e0a\u4ece\u5ba2\u6237\u7aef\u5230\u5e95\u5c42\u5bb9\u5668\u8fd0\u884c\u65f6\uff0c\u7edd\u5927\u90e8\u5206\u5730\u65b9Kubernetes\u90fd\u4e3a\u6211\u4eec\u9884\u7559\u4e86\u6269\u5c55\u70b9","title":"Kubernetes\u6269\u5c55"},{"location":"kubernetes/extend/#kubectl","text":"\u7528\u6237\u901a\u5e38\u4f7f\u7528kubectl\u4e0eKubernetes API\u4ea4\u4e92\u3002 Kubectl\u63d2\u4ef6 \u80fd\u591f\u6269\u5c55Kubectl\u7684\u884c\u4e3a\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u63d2\u4ef6\u53ea\u4f1a\u5f71\u54cd\u5230\u6bcf\u4e2a\u7528\u6237\u7684\u672c\u5730\u73af\u5883 Kubectl\u5c06\u4f1a\u5728\u7528\u6237\u7684PATH\u8def\u5f84\u4e0b\u67e5\u627e kubectl-* \u4e3a\u524d\u7f00\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5e76\u4e14\u628a\u5b83\u5f53\u6210\u4e00\u4e2a\u63d2\u4ef6. \u4f8b\u5982tekton\u7684cli\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2akubectl\u63d2\u4ef6 kubectl-tkn \u65b9\u5f0f\u8fd0\u884c \u6709\u4e00\u4e9b\u5199\u597d\u7684kubectl plugins\u53ef\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u66f4\u591a\u4fe1\u606f\u8bf7\u8bbf\u95ee \u8fd9\u91cc","title":"Kubectl"},{"location":"kubernetes/extend/#apiserver","text":"APIServer\u5904\u7406\u6240\u6709\u7684\u8bf7\u6c42\uff0c\u5f53\u8bf7\u6c42\u5230\u8fbeAPIServer\u65f6\uff0c\u9700\u8981\u7ecf\u8fc7\u8ba4\u8bc1->\u9274\u6743->\u51c6\u5165\u63a7\u5236\u7684\u6b65\u9aa4\uff0c\u5728\u8fd9\u4e9b\u6b65\u9aa4\u4e2d\u90fd\u5b58\u5728\u6269\u5c55\u70b9","title":"ApiServer"},{"location":"kubernetes/extend/#_1","text":"\u7528\u7684\u6700\u591a\u7684\u662f\u51c6\u5165\u63a7\u5236\u7684\u6269\u5c55\uff0c\u51c6\u5165\u63a7\u5236\u4f1a\u5148\u7ecf\u8fc7\u53d8\u66f4\u51c6\u5165\u63a7\u5236MutatingAdmissionWebhook\uff0c\u7136\u540e\u518d\u7ecf\u8fc7\u9a8c\u8bc1\u51c6\u5165\u63a7\u5236ValidatingAdmissionWebhook,\u4efb\u4f55\u4e00\u4e2a\u51c6\u5165\u63a7\u5236\u5668\u8fd4\u56de\u4e86\u9519\u8bef\u8fd9\u4e2a\u8bf7\u6c42\u90fd\u4f1a\u5931\u8d25\uff0c\u5728\u8fd9\u4e24\u4e2a\u51c6\u5165\u63a7\u5236\u5668\u4e2d\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u4f8b\u5982\u6ce8\u5165sidecar\uff0c\u9a8c\u8bc1\u8d44\u6e90\uff0c\u8c03\u6574pod\u7684\u914d\u989d\u7b49\u7b49 Kubernetes API\u8bbf\u95ee\u6269\u5c55 \u6df1\u5165\u7406\u89e3k8s\u4e2d\u7684\u8bbf\u95ee\u63a7\u5236","title":"\u51c6\u5165\u63a7\u5236"},{"location":"kubernetes/extend/#aggregation-layer","text":"\u4eceK8s 1.7\u7248\u672c\u4e4b\u540e\uff0cAPIServer\u5f15\u5165\u4e86\u805a\u5408\u5c42\u7684\u529f\u80fd\uff0cAPI Aggregation\u5141\u8bb8\u5728\u4e0d\u4fee\u6539Kubernetes\u6838\u5fc3\u4ee3\u7801\u7684\u540c\u65f6\u6269\u5c55Kubernetes API\uff0c\u5373\u5c06\u7b2c\u4e09\u65b9\u670d\u52a1\u6ce8\u518c\u5230Kubernetes API\u4e2d\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7Kubernetes API\u6765\u8bbf\u95ee\u5916\u90e8\u670d\u52a1 \u4f8b\u5982\uff1a\u5c06\u5982\u4e0b\u7684\u8d44\u6e90\u63d0\u4ea4\u7ed9K8s\u4ee5\u540e\uff0c\u5f53\u7528\u6237\u5728\u8bbf\u95eeApiServer\u7684/apis/metrics.kubernetes.io/v1beta1\u8def\u5f84\u65f6\uff0c\u4f1a\u88ab\u8f6c\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684metrics-server.kube-system.svc\u670d\u52a1\u4e0a apiVersion: apiregistration.Kubernetes.io/v1 kind: APIService metadata: name: v1beta1.metrics.Kubernetes.io spec: service: name: metrics-server namespace: kube-system group: metrics.Kubernetes.io version: v1beta1 insecureSkipTLSVerify: true groupPriorityMinimum: 100 versionPriority: 100 Kubernetes API Aggregator\u662f\u4ec0\u4e48 Kubernetes\u6269\u5c55apiserver\u5b9e\u73b0\u5206\u6790 Kube-Aggregator","title":"Aggregation Layer"},{"location":"kubernetes/extend/#_2","text":"\u6211\u4eec\u5e38\u7528\u7684 Deployment , Pod , Node \u7b49\u90fd\u662fK8s\u5b98\u65b9\u63d0\u4f9b\u7684\u5185\u7f6e\u8d44\u6e90\uff0c\u4f46\u662f\u6709\u65f6\u5019\u5185\u7f6e\u8d44\u6e90\u65e0\u6cd5\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528CustomResource\uff0c\u5373\u81ea\u5b9a\u4e49\u8d44\u6e90 CR\u5e38\u5e38\u4f1a\u548ccontroller\u4e00\u8d77\u914d\u5408\u4f7f\u7528","title":"\u8d44\u6e90"},{"location":"kubernetes/extend/#_3","text":"Kubernetes\u4e2d\u8d44\u6e90\u7684\u72b6\u6001\u7684\u7ef4\u62a4\u90fd\u662fController\u6765\u5b9e\u73b0\u7684\uff0ccontroller\u4f1a\u4e0d\u65ad\u5c1d\u8bd5\u5c06\u4e00\u4e2a\u8d44\u6e90\u8c03\u6574\u4e3a\u6211\u4eec\u63cf\u8ff0\u7684\u72b6\u6001\uff0c\u5373\u5e38\u8bf4\u7684\u58f0\u660e\u5f0fapi \u58f0\u660e\u5f0fAPI\u80cc\u540e\u5177\u4f53\u7684\u6d3b\u90fd\u662fcontroller\u5e72\u7684\uff0ccontroller\u4e00\u822c\u4f1a\u914d\u5408\u7740CRD\u4e00\u8d77\u4f7f\u7528","title":"\u63a7\u5236\u5668"},{"location":"kubernetes/extend/#_4","text":"Kubernetes\u8c03\u5ea6\u5668\u8d1f\u8d23\u51b3\u5b9aPod\u8981\u653e\u7f6e\u5230\u54ea\u4e9b\u8282\u70b9\u4e0a\u6267\u884c \u8c03\u5ea6\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u63a7\u5236\u5668\uff0c\u8d1f\u8d23\u76d1\u89c6Pod\u53d8\u5316\u5e76\u5c06Pod\u5206\u6d3e\u7ed9\u8282\u70b9\u3002\u9ed8\u8ba4\u7684\u8c03\u5ea6\u5668\u53ef\u4ee5\u88ab\u6574\u4f53\u66ff\u6362\u6389\u6216\u8005\u662f\u4f7f\u7528\u591a\u4e2a\u8c03\u5ea6\u5668 \u9664\u6b64\u4e4b\u5916\uff0c\u5b98\u65b9\u9ed8\u8ba4\u7684\u8c03\u5ea6\u5668\u4e5f\u652f\u6301WebHook \u8c03\u5ea6\u5668\u6269\u5c55 Kubernetes Scheduler","title":"\u8c03\u5ea6\u5668"},{"location":"kubernetes/extend/#cni","text":"CNI\u7f51\u7edc\u63d2\u4ef6\uff0c\u5168\u79f0Container Network Interface(\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3)\uff0c\u7531\u4e00\u7ec4\u7528\u4e8e\u914d\u7f6eLinux\u5bb9\u5668\u7684\u7f51\u7edc\u63a5\u53e3\u7684\u89c4\u8303\u548c\u5e93\u7ec4\u6210\uff0c\u540c\u65f6\u8fd8\u5305\u542b\u4e00\u4e9b\u63d2\u4ef6 CNI\u4ec5\u5173\u5fc3\u5bb9\u5668\u521b\u5efa\u65f6\u7684\u7f51\u7edc\u5206\u914d\uff0c\u548c\u5f53\u5bb9\u5668\u88ab\u5220\u9664\u65f6\u91ca\u653e\u7f51\u7edc\u8d44\u6e90 CNI\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3 Container Network Interface","title":"\u7f51\u7edc\u63d2\u4ef6CNI"},{"location":"kubernetes/extend/#csi","text":"\u5168\u79f0\u662fContainer Storage Interface\uff0c\u53ef\u4ee5\u901a\u8fc7CSI\u63a5\u53e3\u652f\u6301\u4e0d\u540c\u7684\u5b58\u50a8\u7c7b\u578b \u63a8\u8350\u4e00\u4e2a\u52a8\u6001\u81ea\u52a8\u521b\u5efa\u672c\u5730\u76ee\u5f55\u4f5c\u4e3a\u6301\u4e45\u5316\u76ee\u5f55\u7684provisioner rancher/local-path-provisioner \u641e\u5b9a\u6301\u4e45\u5316\u5b58\u50a8 PV/PVC/StorageClass/Provisioner rancher provisioner \u5bb9\u5668\u5b58\u50a8\u63a5\u53e3 CSI\u63d2\u4ef6\u7f16\u5199\u6307\u5357 csi-spec \u4f7f\u7528CSI\u548cKubernetes\u5b9e\u73b0\u5377\u7684\u52a8\u6001\u6269\u5bb9","title":"\u5b58\u50a8\u63d2\u4ef6CSI"},{"location":"kubernetes/extend/#cri","text":"\u5168\u79f0Container Runtime Interface,\u662f\u4e00\u7ec4\u7528\u4e8e\u7ba1\u7406\u5bb9\u5668\u8fd0\u884c\u65f6\u548c\u955c\u50cf\u7684gRPC\u63a5\u53e3\uff0c\u5229\u7528\u8fd9\u4e2a\u63a5\u53e3\u53ef\u4ee5\u652f\u6301docker\uff0ccontainerd\u7b49\u4e0d\u540c\u7684\u5bb9\u5668\u8fd0\u884c\u65f6 Container Runtime Interface CRI","title":"\u5bb9\u5668\u8fd0\u884c\u65f6CRI"}]}